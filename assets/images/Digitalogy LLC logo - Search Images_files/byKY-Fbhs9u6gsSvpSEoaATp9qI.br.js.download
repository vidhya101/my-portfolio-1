var AutoSuggest,sa_storage,__extends,Bing,sa_inst;(function(n){var t;(function(n){var t,i,r,u,f,e;(function(n){n.User="SRCHHPGUSR"})(t=n.CookieNames||(n.CookieNames={})),function(n){n.AutoSuggest="AS"}(i=n.CrumbNames||(n.CrumbNames={})),function(n){n.CursorPosition="cp";n.ConversationId="cvid";n.SuggestionCount="sc";n.PartialQuery="pq";n.SuggestionPosition="sp";n.SuggestionType="qs";n.PreviewPaneSuggestionType="qsc";n.SkipValue="sk";n.PreviewPaneSkipValue="skc";n.Ghosting="ghc";n.Css="css";n.Count="count";n.DataSet="ds";n.SessionId="sid";n.TimeStamp="qt";n.Query="q";n.ImpressionGuid="ig";n.InsertID="iid";n.SFX="sfx";n.QFQuery="qry";n.BaseQuery="bq";n.FormCode="form";n.HashedMuid="nclid";n.RequestElToken="elvr";n.ElTokenValue="elv";n.AppId="appid";n.History="history";n.NoHistory="nohs";n.ApiTextDecoration="textdecorations";n.ClientId="clientid";n.Market="mkt";n.Scope="scope";n.CountryCode="cc";n.HomeGeographicRegion="hgr";n.SetLang="setlang";n.ZeroInputSerp="zis";n.GhShown="ghsh";n.GhAccepted="ghacc";n.GhPrefixLength="ghpl";n.LonqQueryParam="lq";n.ParallelSuggestionCall="enpsc";n.ASCodeVersion="ascv";n.Csr="csr";n.AsCsrVersion="sm";n.suggChipId="scid";n.fullFormedQuery="ffq";n.CopilotSearchConversationId="cscvid"}(r=n.QueryParams||(n.QueryParams={})),function(n){n.ImpressionGuid="X-MSEdge-IG"}(u=n.Headers||(n.Headers={})),function(n){n.HitHighlighting="h";n.PopularNow="p";n.Local="l";n.Answers="a"}(f=n.Options||(n.Options={})),function(n){n.Id="id";n.Query="query";n.Url="url";n.Navigation="nav";n.Type="stype";n.Autocomplete="hc";n.InstData="h";n.AriaLabel="aria-label";n.RequestGuid="rg";n.AdQuery="adq";n.GhostingText="ghtxt"}(e=n.SuggestionAttributes||(n.SuggestionAttributes={}))})(t=n.Service||(n.Service={}))})(AutoSuggest||(AutoSuggest={})),function(n){var t;(function(n){var t;(function(n){function l(n){return n?n[n[i]!==undefined?i:f]:undefined}function u(n,t){n&&t!==null&&t!==undefined&&(n[n[i]!==undefined?i:f]=t)}function a(n){return _w.getComputedStyle?_w.getComputedStyle(n,null):n.currentStyle}function v(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)"),i=n.match(r);return i?i[1]:null}function y(n,t,i){if(n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.moveEnd("sentence",-1e5);r.moveStart("character",t);r.moveEnd("character",i-t);r.select()}}function p(n,t){for(var r,i,u=0;i=t[u];++u)r=n.getAttribute(i),r&&(n[i]=r)}function w(n){var t=sj_ev(n);return{x:t.clientX,y:t.clientY}}function b(n,t){return function(i){var r=sj_ev(i),u=r.relatedTarget||(r.type=="mouseout"?r.toElement:r.fromElement);t===u||e(u,t)||n.call(t,r)}}function k(n,t){var i=0,r=_d.selection;if(n.selectionStart!=null)i=n.selectionStart;else if(r&&n.createTextRange){t&&n.focus();var u=n.createTextRange(),f=u.duplicate(),e=r.createRange();t&&u.moveToBookmark(e.getBookmark());f.setEndPoint("EndToStart",e);i=f.text.length}return i}function d(n,t){n&&(n.className=n.className.replace(t,""))}function g(n,t){var u,i,r,f;if(n){for(u=n.className.split(" "),i=0,r=u;i<r.length;i++)if(f=r[i],f===t)return;n.className.length>0&&(n.className+=" ");n.className+=t}}function nt(n,t){return n?n.replace(h,function(n,i){return t[i]}):n}function tt(n,t){var i=t.replace(/\s+$/g,"");return t[t.length-1]==" "&&n.length>0&&et(t,i,n[0])?i:t}function e(n,t){if(!n||!t||t===n)return!1;while(n&&t!==n)n=n.parentElement;return t==n}function it(n,t,i){var r=s.exec(t);if(!r||!r[1])throw new Error("Given text format doesn't contain link markup");u(i,r[1]);u(n,sa_loc.SearchRemoved);n.innerHTML=n.innerHTML.replace("%e"+i.innerHTML+"%E",ft(i))}function rt(n,t,i,r){var u,f;return i===void 0&&(i=null),r===void 0&&(r=!1),u=_d.createElement("span"),u.textContent=t,u.style.visibility="hidden",i&&(u.style.fontSize=i),r&&(u.style.fontWeight="bold"),n.appendChild(u),f=u.offsetWidth,n.removeChild(u),f}function r(n,t,i){try{return n()}catch(r){return i&&i(),t}}function ut(n){return n?"Bearer ".concat(n):""}function ft(n){var t=sj_ce("div");return t.appendChild(n),t.innerHTML}function et(n,t,i){return n==i.substr(0,n.length)||t==i}function t(n){var t=Math.abs(Math.floor(n));return(t<10?"0":"")+t}function ot(){var n=new Date,i=-n.getTimezoneOffset(),r=i>=0?"+":"-";return n.getFullYear()+"-"+t(n.getMonth()+1)+"-"+t(n.getDate())+"T"+t(n.getHours())+":"+t(n.getMinutes())+":"+t(n.getSeconds())+"."+t(n.getMilliseconds())+r+t(i/60)+":"+t(i%60)}function st(n){var t,e=undefined,i;try{if(o()&&(i=_w.sessionStorage.getItem("connectorsVerticalSettings"),i)){var r=JSON.parse(i),u=r===null||r===void 0?void 0:r.data,f=u===null||u===void 0?void 0:u.find(function(t){var i;if((i=t.Entities)!==null&&i!==void 0)return i.some(function(t){var i;if((i=t===null||t===void 0?void 0:t.ContentSources)!==null&&i!==void 0)return i.some(function(t){return(t===null||t===void 0?void 0:t.Id)&&(t===null||t===void 0?void 0:t.Id.toString().toLowerCase())==n.toLowerCase()})})});e=(t=f===null||f===void 0?void 0:f.Id)===null||t===void 0?void 0:t.toLowerCase()}}catch(s){}return e}function ht(n){return r(function(){return _w.localStorage?_w.localStorage.getItem(n):null},null)}function ct(n,t,i){var u=new Date,f={value:t,expiry:i?i:u.getTime()+c};return r(function(){_w.localStorage?_w.localStorage.setItem(n,JSON.stringify(f)):null},null)}function lt(n){return r(function(){_w.localStorage?_w.localStorage.removeItem(n):null},null)}function at(n){return typeof n=="number"&&!isNaN(n)&&isFinite(n)}function o(){return!!("sessionStorage"in _w&&_w.sessionStorage)}var i="textContent",f="innerText",s=/%e([^%]+)%E/,h=/{([0-9]+)}/g,c=6048e5;n.GetTextContent=l;n.SetTextContent=u;n.GetComputedStyle=a;n.GetQueryStringParam=v;n.SetSelectionRange=y;n.RewriteAttribsToProps=p;n.GetMouseCoords=w;n.MouseEnterLeave=b;n.getCursorPosition=k;n.RemoveClassName=d;n.AddClassName=g;n.formatString=nt;n.TrimmedQueryFromSuggestions=tt;n.isChildOf=e;n.SetTextContentWithLink=it;n.CalcWidth=rt;n.safeExecute=r;n.getBearerTokenHeader=ut;n.getDateWithTimezone=ot;n.getConnectorUrlSuffixFromStorage=st;n.getItem=ht;n.setItem=ct;n.removeItem=lt;n.checkIfValidNumber=at;n.isStorageSupported=o})(t=n.Utils||(n.Utils={}))})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var i=function(){function n(){this._eventRegistry=[]}return n.prototype.registerEvents=function(n){this._eventRegistry.push(n)},n.prototype.raiseEvent=function(n){for(var i,r,f,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(i=0,r=this._eventRegistry;i<r.length;i++)f=r[i],f.raise(n,u)},n.prototype.clearEvents=function(){this._eventRegistry=[]},n}(),t;n.EventRegisterer=i;t=function(){function n(n){this._eventParent=n;this.events=[]}return n.prototype.add=function(n,t){this.events[n]=t},n.prototype.proxy=function(n){for(var i,r,e,u=this,f=[],t=1;t<arguments.length;t++)f[t-1]=arguments[t];for(i=0,r=f;i<r.length;i++)e=r[i],function(t){u.events[t]=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.splice(0,0,t);n.apply(u._eventParent,r)}}(e)},n.prototype.raise=function(n,t){var i=this.events[n];i&&i.apply(this._eventParent,t)},n}();n.EventRegistration=t})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var i,e,f;(function(n){n.Web="Web";n.RichRequery="RR"})(i=n.DataSources||(n.DataSources={})),function(n){n.RelatedSearch="RS";n.PeopleAlsoAsk="PAA";n.PeopleAlsoSearchFor="PASF";n.PeopleAlsoSearchForExploreMore="PASFEM";n.TrendingNowOnRight="TRR"}(e=n.SearchTypeUtils||(n.SearchTypeUtils={}));n.suggestionParentClass="sa_prnt";n.ZisRankableBanners=["BC","TR","SH","SP"];var t=AutoSuggest.Service.QueryParams,r="ajax.unload",u=[t.SuggestionPosition,t.Ghosting,t.LonqQueryParam,t.AsCsrVersion],o=u.concat([t.PartialQuery,t.SuggestionCount,t.SuggestionType,t.SkipValue,t.ConversationId,t.LonqQueryParam]);n.searchBoxFocusEventId="SearchBox_Focus";f=function(f){function e(n,t,i,r){var u=f.call(this)||this;return u.canvas=n,u._dataProvider=t,u._instrumentation=i,u.internalEventTrigger=r,u.hasPrefixQueryBeenUpdated=!1,u.currentQuery="",u.data={},u.ghostInstValue=0,u.networkLatencyInfo="",u.ghostingShown=0,u.ghostingAccepted=0,u.ghostingPrefixLength="",u.isLongQuery=!1,u.preactComponentsLoaded=!1,u._cursorPosition=0,u._queryWithCurrentSuggestions="",u._receivedAtLeastOnceValidResponse=!1,u._isDisposed=!1,u._requestSequence=-1,u._originalQuery="",u._previousLocationCache=null,u._cacheZisEarly=!1,u}return __extends(e,f),e.prototype.init=function(t,i,r){var u=this,o,s,c,l,f,h;for(this._originalQuery=r.value,this.config=t,this._container=i,this.registerAjaxSerpUnloadEvent(),this.previousQuery=r===null||r===void 0?void 0:r.value,o=0,s=e.ScopeExtensions;o<s.length;o++)c=s[o],c.init(this);e.ScopeExtensions=[];l=function(n,t,i,r,f,e,o,s){return u.dataProviderCallbackFunc(n,t,i,r,f,o,s)};this._dataProvider.init(t,t.u,l);this.canvas.init(this,t,i,r);f=new n.EventRegistration(this);f.proxy(this.raiseEvent,10,12,11);f.add(4,function(n,t,i){u.raiseEvent(4,n,t,i)});f.add(20,function(n,t){t.className.indexOf("as_qb")!=-1&&(u.raiseEvent(13,n.query+" ",!1),_w.Log&&Log.Log&&Log.Log("Select","QueryBuilder","Click",!1,"ImpressionGuid",u.data.Inst.IG))});f.add(25,function(n){u.raiseEvent(13,n.query+" ",!1);_w.Log&&Log.Log&&Log.Log("Select","MobileNextWordSuggestion","Click",!1,"ImpressionGuid",u.data.Inst.IG)});this.canvas.registerEvents(f);this.raiseEvent(6,this);this.internalEventTrigger&&(h=new n.EventRegistration(this),h.add(33,function(n){u.raiseEvent(13,n+" ",!1);_w.Log&&Log.Log&&Log.Log("Select","QueryBuilder","Click",!1,"ImpressionGuid",u.data.Inst.IG)}),this.internalEventTrigger.registerEvents(h));performance&&performance.getEntries&&this.LogPerformanceTiming(["AutosuggestBootstrapLoaded","AutosuggestJSBundleLoaded"]);t.asResUrlLog&&performance&&setTimeout(function(){performance.getEntriesByName(sa_config.cssResourceUrl)&&u.raiseCSSResourceLoading();performance.getEntriesByName(sa_config.jsResourceUrl)&&u.raiseJSResourceLoading()},2e3)},e.prototype.raiseGhostingEventFired=function(n,t){this.raiseEvent(31,n,t)},e.prototype.raiseGhostedTextLength=function(n,t){this.raiseEvent(26,n,t)},e.prototype.raiseJSResourceLoading=function(){this.raiseEvent(37)},e.prototype.raiseCSSResourceLoading=function(){this.raiseEvent(36)},e.prototype.raiseGhostingAccepted=function(n,t,i){this.raiseEvent(27,n,t,i)},e.prototype.raiseUpdateGhostedText=function(n,t,i,r){this.raiseEvent(14,n,t,i,r)},e.prototype.raiseUpdateTextAndRequery=function(n,t){this.raiseEvent(13,n,t)},e.prototype.raiseUpdateText=function(n,t){t===void 0&&(t=!0);this.raiseEvent(12,n,t)},e.prototype.raiseTextChanged=function(n,t){this.raiseEvent(18,n,t)},e.prototype.setData=function(n){this.data=n},e.prototype.isLocalStorageSupported=function(){try{return typeof Storage!="undefined"&&_w.localStorage&&_w.sessionStorage?!0:!1}catch(n){return!1}},e.prototype.dataProviderCallbackFunc=function(t,r,u,f,e,o,s){var h,c;(this._previousLocationCache=e||this._previousLocationCache,!this._isDisposed&&(this.canvas.searchBoxHasFocus()||this.config.mnw))&&(this._cacheZisEarly||(n.CachedResponseUtils&&n.CachedResponseUtils.checkCachedResponseAndLog&&(t=n.CachedResponseUtils.checkCachedResponseAndLog(t,f)),t!=null&&(this.config.aspsc&&f.indexOf("enpsc=1")!==-1?sj_evt.fire("AS.PSCResponseRecieved",t,this.currentQuery,r,u!=this.currentQuery):(this.raiseEvent(9,u,r,i.Web,o),this._queryWithCurrentSuggestions=u,this.config.ascsr?sj_evt.fire("AS.ResponseRecieved",t,this.currentQuery,r,u!=this.currentQuery):this.canvas.render(t,this.currentQuery,r,i.Web,u!=this.currentQuery),this._receivedAtLeastOnceValidResponse=!0,this.config.enbleClientPerfTelemetry&&this._instrumentation&&this._instrumentation.logASNetworkCallLatency&&typeof performance!="undefined"&&performance&&performance.getEntries&&(h=this._instrumentation.logASNetworkCallLatency(),h!==""&&this.appendLatency(h)),this._instrumentation&&(c=this.data&&this.data.Inst?this.data.Inst.IG:null,this._instrumentation.updateImpressionGuid(c,r)),s&&_w.Log&&Log.Log&&Log.Log("PrefetchCache","AS","PerfInst",!1)))))},e.prototype.getAllSuggestionInstUrl=function(n,t){for(var u,f,o=this.getInstrumentationKeys(t),i=[],r=0,e=o;r<e.length;r++)u=e[r],f=this.getSuggestionInstValue(u,!0,n),f!==null&&(i=i.concat(["&",u,"=",f]));return i.join("")},e.prototype.getAllSuggestionInstObject=function(n,t,i){var s,f,r,e,u,o;for(i===void 0&&(i=null),s=this.getInstrumentationKeys(t),f={},r=0,e=s;r<e.length;r++)(u=e[r],o=this.getSuggestionInstValue(u,!1,n),this.config.longquery&&this.isLongQuery&&u==="pq"&&i!==null&&i.length>500)||o!==null&&(f[u]=o);return f},e.prototype.getInstrumentationKeys=function(n){return n?o:u},e.prototype.getSuggestionInstValue=function(n,i,r){var u;r=r||this.canvas.selectedSuggestion;switch(n){case t.SuggestionCount:return this.canvas.currentSuggestionList.length+"-"+this._queryWithCurrentSuggestions.length;case t.PartialQuery:return i?encodeURIComponent(this._queryWithCurrentSuggestions):this._queryWithCurrentSuggestions;case t.SuggestionPosition:return this.config.ascsr?this.canvas.selectedSuggestion?((u=this.canvas.selectedSuggestion)===null||u===void 0?void 0:u.originalIndex)+1+"":"-1":(this.config.mnw&&r&&r.ord>this.canvas.mnwSuggestionsCount&&(r.ord=r.ord-this.canvas.mnwSuggestionsCount),r?""+r.ord:this.config.mnw&&this.isMNWSuggestionSelected(this.canvas.clickedMNWSuggestionType)?this.canvas.clickedMNWSuggestionPosition.toString():"-1");case t.SuggestionType:return r?r.src:this.config.mnw&&this.isMNWSuggestionSelected(this.canvas.clickedMNWSuggestionType)?this.canvas.clickedMNWSuggestionType:"n";case t.SkipValue:return r&&r.sk?r.sk:"";case t.Ghosting:return this.ghostInstValue==0?null:this.ghostInstValue.toString();case t.ConversationId:return _G.IG;case t.LonqQueryParam:return this.isLongQuery?"1":"0";case t.AsCsrVersion:return this.config.sm?this.config.sm:null;default:return null}},e.prototype.isMNWSuggestionSelected=function(n){return n=="MNW"||n=="MNWU"||n=="MNWB"||n=="MNWT"||n=="MNWF"?!0:!1},e.prototype.setCursorPosition=function(n){this._cursorPosition=n},e.prototype.getCurrentCursorPosition=function(){return this._cursorPosition},e.prototype.finalizeKeystroke=function(){this._instrumentation&&this._requestSequence>-1&&this._instrumentation.finalizeKeystroke(this._requestSequence)},e.prototype.fetch=function(n){var i,t,r;if(this.finalizeKeystroke(),this._requestSequence++,i=n&&n.length,this._instrumentation&&this._instrumentation.beginRequest(this._requestSequence),this.config.isCS&&(t=CopilotSearch.AutoSuggest.getTurnCount(),r=CopilotSearch.AutoSuggest.getSuggestionChipId(),i<3&&t==0||!this.config.isCST1&&t>0||t>0&&(r===null||r.trim()===""||i<1))){this.raiseEvent(16,6);return}this.config.ascslogff&&_w.Log&&Log.LogFilterFlare&&Log.LogFilterFlare(["ascopilotsearch"]);this.fetchWeb(n,this._requestSequence,!1)},e.prototype.fetchZeroQF=function(){this.config.enableZeroQfWork&&(this.finalizeKeystroke(),this._requestSequence++,this._instrumentation&&this._instrumentation.beginRequest(this._requestSequence),this.fetchWeb("",this._requestSequence,!1))},e.prototype.onSearchBoxFocusWithRetry=function(n,t,i,r){var u=this;if(t!==this.currentQuery){r&&r();return}this.canvas.searchBoxHasFocus()?i():n<5&&sb_st(function(){u.onSearchBoxFocusWithRetry(n+1,t,i,r)},15)},e.prototype.fetchWeb=function(i,r,u,f){var e,h,o,s;if(f===void 0&&(f=!1),this._dataProvider.addParam(t.CursorPosition,this._cursorPosition.toString()),this._container!=null&&this._container.parentNode!=null&&(e=this._container.parentNode.offsetWidth.toString(),this.config.cors?this._dataProvider.addParam("contentWidth",e):this._dataProvider.addHeader("X-Autosuggest-ContentWidth",e)),_ge("sidebar_search_experience")&&this._dataProvider.addHeader("X-SIDEBAR-SEARCH","true"),this.isLocalStorageSupported()&&n.Utils.setItem("asUsed",1),this._receivedAtLeastOnceValidResponse&&(!this.config.aszisear||i!=="")||this.config.ascssdis||this.config.ascsr||this._dataProvider.addParam(t.Css,"1"),this.config.ascsr&&this._dataProvider.addParam(t.Csr,"1"),this.config.isCS&&(h=CopilotSearch.AutoSuggest.getTurnCount(),h>0&&(this._dataProvider.addParam(t.suggChipId,CopilotSearch.AutoSuggest.getSuggestionChipId()),this._dataProvider.addParam(t.fullFormedQuery,CopilotSearch.AutoSuggest.getFullFormedquery()),this._dataProvider.addParam(t.CopilotSearchConversationId,CopilotSearch.AutoSuggest.getConversationId()))),this.config.sm&&this._dataProvider.addParam(t.AsCsrVersion,this.config.sm),i===""&&this.config.zisr1>0&&(o=this.checkSuggestionTypeForRanking(),o!=""&&this._dataProvider.addParam("zisBD",o)),!this.config.ascsr&&(this.config.ezis&&this._originalQuery===i&&this._requestSequence==0||this.config.aszisear&&i==="")&&this._dataProvider.addParam(t.ZeroInputSerp,"1"),this.config.ascsr&&this.config.ezis&&this._originalQuery===i&&this._dataProvider.addParam(t.ZeroInputSerp,"1"),this.config.pc&&this._dataProvider.addParam("pubcode",this.config.pc),this.isLocalStorageSupported()&&(this.config.enableBaseQInLocalStorage||this.config.enableBaseQLocStorageOnlyZI&&this.currentQuery!==undefined&&this.currentQuery==="")&&_w.localStorage!==null&&_w.localStorage!==undefined&&this.config!==null&&this.config.u!==null&&this.config.u.indexOf("%26bq%3d")===-1&&this._dataProvider.addParam("bq",_w.localStorage.getItem("baseq")),this.config.footnote&&this._dataProvider.addParam("footnote","1"),this.config.longquery&&this.isLongQuery&&this._dataProvider.addParam("lq","1"),this.config.adcached&&this._adCachedQuery&&this._adCachedImpressionGuid&&(this._dataProvider.addParam("adq",this._adCachedQuery),this._dataProvider.addParam("adig",this._adCachedImpressionGuid)),this.config.pcov&&(s=this.getPartnerCodeOverride(),s&&this._dataProvider.addParam("pc",s)),this.config.IsBingPrivate&&!this.config.cors&&this._dataProvider.addHeader("preferAnonymous","1"),this.config.enableRequeryParam&&!this.hasPrefixQueryBeenUpdated&&this._dataProvider.addParam("rqry","1"),this.config.isPathSearch&&this._dataProvider.addParam("pths","1"),this.config.aspsc&&f){this._dataProvider.addParam(t.ParallelSuggestionCall,"1");this._dataProvider.fetch(i,r,!0);sj_evt.fire("AS.PSCRequestSent",this.currentQuery);return}this.config.ascsr&&this.attemptLoadingCsrBundles();this.config.asprefre||this.config.asprefrev3?(this.raiseEvent(7,this.currentQuery,r),this._dataProvider.fetch(i,r,!0)):(this._dataProvider.fetch(i,r,!0),this.raiseEvent(7,this.currentQuery,r));u||sj_evt.fire("AS.RequestSent",this.currentQuery)},e.prototype.registerAjaxSerpUnloadEvent=function(){var n=this,t=function(i){var u=i&&i[1];u&&u.isInstantRequest||(n._isDisposed=!0,sj_evt.unbind(r,t),n.raiseEvent(17),n.clearEvents())};sj_evt.bind(r,t,!1)},e.prototype.getPartnerCodeOverride=function(){var n,t=(n=_ge(this.config.f))===null||n===void 0?void 0:n.querySelector("[name='pc']"),r=t&&t.value,u=_d.location.href.indexOf("ntp.msn.com/edge/ntp")>=0||_d.location.href.indexOf("ntp.msn.cn/edge/ntp")>=0,i;return!r&&u&&(i="U531"),i},e.prototype.setRawQuery=function(n){this.canvas.updateRawQuery(n)},e.prototype.setPSCQuery=function(n){this.fetchWeb(n,this._requestSequence,!1,!0)},e.prototype.setQuery=function(n){if(this._cacheZisEarly=!1,this.config.enableRequeryParam&&n!==undefined&&(this.previousQuery=this.currentQuery!==""?this.currentQuery:this.previousQuery),this.currentQuery=n,this.config.enableRequeryParam&&n!==undefined&&(this.hasPrefixQueryBeenUpdated=this.previousQuery==""||this.hasPrefixQueryBeenUpdated||this.previousQuery!==undefined&&this.previousQuery.toLowerCase()!==this.currentQuery.toLowerCase()),typeof n=="undefined"||n.length==0&&!this.config.fetchOnEmpty){this.fetchZeroQF();return}this.fetch(n)},e.prototype.pretechQuery=function(n){this._cacheZisEarly=!0;this.fetchWeb(n,0,!0)},e.prototype.setAdCachedQuery=function(n,t){this._adCachedQuery=n;this._adCachedImpressionGuid=t},e.prototype.appendLatency=function(n){this.networkLatencyInfo=this.data&&this.data.Inst?this.networkLatencyInfo==""?this.data.Inst.IG+":"+n:this.networkLatencyInfo+"&"+this.data.Inst.IG+":"+n:this.networkLatencyInfo==""?n:this.networkLatencyInfo+"&"+n},e.prototype.checkSuggestionTypeForRanking=function(){for(var i="",t=0;t<n.ZisRankableBanners.length;t++)this.checkClicksOrExpirty(n.ZisRankableBanners[t])&&(i=i!=""?i+","+n.ZisRankableBanners[t]:n.ZisRankableBanners[t]);return i},e.prototype.checkClicksOrExpirty=function(t){var r=n.Utils.getItem(t),i,u;try{if(r){if(i=JSON.parse(r),u=new Date,i&&u.getTime()>i.expiry)return n.Utils.removeItem(t),!1;if(i&&i.value>=this.config.zisr1)return!0}return!1}catch(f){return!1}},e.prototype.attemptLoadingCsrBundles=function(){this.config.csr_precompbootstrap||typeof sa_preactcompsloader=="undefined"||this.preactComponentsLoaded||(sa_preactcompsloader(),this.preactComponentsLoaded=!0)},e.prototype.LogPerformanceTiming=function(n){n.forEach(function(n){var t=performance.getEntriesByName(n);t&&t[0]&&Log.Log(n,"AS","PerfInst",!1,"LoadTime",t[0].startTime.toString())})},e.ScopeExtensions=[],e}(n.EventRegisterer);n.WebCore=f})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=AutoSuggest.Service.QueryParams,i="sa_errorCnt",r=function(){function n(){this._callParams={};this._callHeaders={};this._callBody={}}return n.prototype.fetchUrl=function(){},n.prototype.init=function(n,t,i){this._config=n;this._baseUrl=t;this._callbackFunc=i},n.prototype.addParam=function(n,t){this._callParams[n]=t},n.prototype.addHeader=function(n,t){if(this._config.cors)throw"Custom headers are not allowed for cross domain calls";this._callHeaders[n]=t},n.prototype.addPostValue=function(n,t){this._callBody[n]=t},n.prototype.addBody=function(n){this._callBody=n},n.prototype.fetch=function(n,t,i){this._requestSequence=t;var r=this.getFinalFetchUrl(n);this.fetchUrl(r,n,t,i)},n.prototype.getBaseUrl=function(){return this._baseUrl},n.prototype.isPostCall=function(){return this._callBody&&typeof this._callBody=="object"&&Object.keys(this._callBody).length>0},n.prototype.getFinalFetchUrl=function(n){var r=decodeURIComponent(this.getBaseUrl())+encodeURIComponent(n),i;(_G.IG===null||_G.IG===undefined||_G.IG==="")&&Log&&Log.Log&&Log.Log("AutoSuggestFetch","AS","Empty_G.IG",!1);_G!==null&&_G!==undefined&&(typeof _G!="object"||_G===null||Object.keys(_G))||Log&&Log.Log&&Log.Log("AutoSuggestFetch","AS","Empty_G",!1);this.addParam(t.ConversationId,_G.IG);this._config.isCS&&(this._config.sfx++,this.addParam(t.SFX,this._config.sfx.toString()),this.addParam(t.InsertID,"CSAS"),this.addParam(t.ImpressionGuid,_G.IG));for(i in this._callParams)r+="&"+i+"="+this._callParams[i];return this._callParams={},r},n}(),u;n.DataProviderBase=r;u=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.fetchUrl=function(t,r,u,f){var o=this,s,e,h,c;if((this._config.asprefre||this._config.asprefrev3)&&typeof sa_storage!="undefined"&&sa_storage.hasOwnProperty(r)&&sa_storage[r]!==null&&sa_storage[r]!==undefined)s=sa_storage[r],this._callbackFunc(s.responseText,u,r,t,null,s.status,s.getResponseHeader("content-length"),!0);else{e=sj_gx();e.open(this.isPostCall()?"POST":"GET",t,!0);for(h in this._callHeaders)e.setRequestHeader(h,this._callHeaders[h]);this._callHeaders={};e.onreadystatechange=function(){var s,n,h,c,l;if(e.readyState==4){if(e.onreadystatechange=function(){},s=void 0,n=e.status,n==200?s=e.responseText:_w[i]&&(n==0||(n/100|0)==4||(n/100|0)==5)&&(s=_w[i]),h=null,f&&(!o._config.cors||o._config.rbhc)&&e.getResponseHeader&&(h=e.getResponseHeader("X-BingQF-BLIS")),o._config.instHeader&&e.getResponseHeader&&(c=e.getResponseHeader("X-BingQF-It"),c))try{l=JSON.parse(c);l.Inst&&sa_inst.setData(l)}catch(a){}o._callbackFunc(s,u,r,t,h,n,e.getResponseHeader("content-length"))}};e.withCredentials!==undefined&&(e.withCredentials=!0);this.isPostCall()?(c=n.Utils.safeExecute(function(){return JSON.stringify(o._callBody)},""),e.send(c)):e.send()}},r}(r);n.DataProvider=u})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var d=["MD","ADS"],g=["CustomSearch"],o=["previousSibling","nextSibling"],nt=["","","nextSibling","previousSibling"],r=["lastChild","firstChild","parentElement"],u=["","","firstChild","lastChild"],f={},b,k;f.sa_ul=0;f.rich_card=1;f.sa_exp_sug=2;var c="sa_hv",tt="sa_kb_hv",l=/(\s|^)sa_hv/g,a=/(\s|^)sa_kb_hv/g,s="data-sugcont",v="as_rsform",it="as_shadow",y="as_show",rt="sa_exp_hv",p=/(\s|^)as_rsform/g,ut=/(\s|^)as_expand/g,ft=/(\s|^)sa_exp_hv/g,et=/(\s|^)sa_drw/g,w="b_norr",ot=/(\s|^)b_norr/g,t=n.Utils,e=AutoSuggest.Service.SuggestionAttributes,h={RS:"RS",PAA:"PAA",PASF:"PASF",PASFEM:"PASFEM"},i;(function(n){n[n.RIGHT_BORDER=0]="RIGHT_BORDER";n[n.LEFT_BORDER=1]="LEFT_BORDER";n[n.NO_BORDER=2]="NO_BORDER";n[n.DUAL_BORDER=3]="DUAL_BORDER"})(i||(i={}));n.searchResultId={RS:"rs_ul",PAA:"paa_ul",PASF:"pasf_ul",PASFEM:"pasf_ul",PN:"zisR_ul"};b=[n.searchResultId.RS,n.searchResultId.PAA,n.searchResultId.PASF,n.searchResultId.PASFEM,n.searchResultId.PN];k=function(k){function st(){var n=k.call(this)||this;return n.currentSuggestionList=[],n._ie9orLower=sb_ie&&!_w.atob,n._currentRequestSequence=-1,n._suggestionsQueue={},n}return __extends(st,k),st.prototype.init=function(i,r,u,f){var e,o;this.autoSuggestInstance=i;this.config=r;this.container=u;this._searchBox=f;this._asContainer=_ge(r.c||"sw_as");o=new n.EventRegistration(this);o.add(17,this.clearEvents);this.autoSuggestInstance.registerEvents(o);this._hasPrefixQueryBeenUpdated=!1;this.nextWordRemoved=!1;this.hasAsExpanded=!1;this.searchTypeDivIndex=0;this.isBNorrClassPresent=!1;this._isNewDom=!1;this._header=document.querySelector("#b_header")?document.querySelector("#b_header"):null;this.resizeNextWord=r.nwRz;this.isFirstNWFullEnabled=r.nextWordNFullSuggsOne;this._previousQuery=(e=f.value)===null||e===void 0?void 0:e.toLowerCase();this._borderRadius=this.config.asdhml&&!this.config.brlg?12:this.config.isMobile?10:24;this.isRtl=t.GetComputedStyle(sj_b).direction=="rtl";this._previousRoundedElement=null;this.cbOnTopLastSuggestion=!1;this._searchBoxForm=document.getElementsByClassName("b_searchboxForm")[0];this.trendingNowMovedToRight=!1;this._highlightedRichLIElement=null;this._easePollingInterval=this.config.easePI},st.prototype.updateWidth=function(){var r=_ge("sw_as"),t,u,f,i;if(this.nextWordRemoved&&r&&(t=document.querySelectorAll("li.sa_sg"),u=n.Utils.GetComputedStyle(r).width,t))for(f=t.length,i=0;i<f;i++)t[i].style.width=u},st.prototype.calculateBorderRadius=function(n){switch(n){case i.DUAL_BORDER:return"0px 0px ".concat(this._borderRadius,"px ").concat(this._borderRadius,"px");case i.RIGHT_BORDER:return"0px 0px 0px ".concat(this._borderRadius,"px");case i.LEFT_BORDER:return"0px 0px ".concat(this._borderRadius,"px 0px");case i.NO_BORDER:return"0px 0px 0px 0px"}},st.prototype.lastElementBorderCurve=function(){var f,u=_ge("as_foot"),t=_ge("sa_ul"),o=_ge("sa_zis_Banner"),r=this.calculateBorderRadius(i.NO_BORDER),e=!1,n;(u===null||((f=u===null||u===void 0?void 0:u.style)===null||f===void 0?void 0:f.display)==="none")&&(r=this.calculateBorderRadius(i.DUAL_BORDER),this.config.enableAsPanelExpansion&&this.hasAsExpanded&&(this.isLeftSectionLongerForRichRequery()?r=this.isRtl?this.calculateBorderRadius(i.LEFT_BORDER):this.calculateBorderRadius(i.RIGHT_BORDER):(e=!0,r=this.calculateBorderRadius(i.NO_BORDER))));t&&(e||(t.style.borderRadius=r),t.children&&t.children.length&&t.lastElementChild&&(n=this._isNewDom&&t.lastElementChild.tagName==="UL"?t.lastElementChild.lastElementChild:t.lastElementChild,n&&!this.trendingNowMovedToRight&&(this._previousRoundedElement&&this._previousRoundedElement&&(this._previousRoundedElement.style.borderRadius=this.calculateBorderRadius(i.NO_BORDER),!this.config.isMobile&&this._previousRoundedElement.tagName.toLowerCase()==="div"&&this._previousRoundedElement.lastElementChild&&(this._previousRoundedElement.lastElementChild.style.borderRadius=this.calculateBorderRadius(i.NO_BORDER))),n.style.borderRadius=r,!this.config.isMobile&&n.tagName.toLowerCase()==="div"&&n.lastElementChild&&(n.lastElementChild.style.borderRadius=r),this.config.asszrdc&&(o||u||(!this.config.isMobile&&n.tagName.toLowerCase()==="div"&&n.lastElementChild?n.lastElementChild.style.paddingBottom="12px":n.style.paddingBottom="12px"),this._previousRoundedElement&&this._previousRoundedElement&&(!this.config.isMobile&&this._previousRoundedElement.tagName.toLowerCase()==="div"&&this._previousRoundedElement.lastElementChild?this._previousRoundedElement.lastElementChild.style.removeProperty("padding-Bottom"):this._previousRoundedElement.style.removeProperty("padding-Bottom"))),this._previousRoundedElement=n)));return},st.prototype.insertHistoryBannerAndUpdateElementCurve=function(n){var r,t,i,u;for(this.container&&(t=this._isNewDom?this.container.getElementsByTagName("DIV"):this.container.getElementsByTagName("UL")),i=0;i<(t===null||t===void 0?void 0:t.length);i++)if(t[i].className.indexOf("sa_drw")!=-1){r=t[i];break}this.config.CommonFooter||n!=""&&(u=this.createDivFromAjaxResponse(n),this.insertAjaxResponseDivIntoDom(r&&!this.hasAsExpanded?r:this.container,u,1,"MSB"));this.config.asmobfw||this.lastElementBorderCurve()},st.prototype.UpdateClassForBoldEntity=function(){var n=document.querySelector(".bold_ent");if(n&&n!=undefined){var r=document.querySelector(".pp_tile.pp_sTile"),u=document.querySelector(".pp_tile.pp_sTile .sa_ans"),t=document.querySelector(".pp_tile.pp_sTile .entity_container .cico"),i=document.querySelector(".pp_tile.pp_sTile .entity_container .cico img");t.style.height="160px";t.style.width="170px";r.classList.add("pp_bold");i.style.height="160px";i.style.width="170px";u.id="sa_ans_bold"}},st.prototype.render=function(i,r,u,f,e){var b,h,a,k,c,p,l,d,g,nt,tt;for(u>this._currentRequestSequence&&(this._suggestionsQueue={},this._currentQuery=r,this._currentRequestSequence=u),this._suggestionsQueue[f]={suggestions:i,rendered:!1,dataSource:f},f==="Web"&&(this._isNewDom=i?!((this.config.moveTrendingNowToRight||this.config.zisPaneexpansion)&&this.config.enableAsPanelExpansion)&&i.substring(0,5)==="<div ":!1),this.config.asLowNetworkScneario&&!this.container.parentElement&&(b=document.querySelector(".sa_as"),this.container=b?b:this.container),this.nextWordRemoved=!1,this.hasAsExpanded=!1,h="",a=0;a<this.config.enabledDataSources.length;a++){var s=[],v=this.config.enabledDataSources,o=this._suggestionsQueue[v[a]];if(!o){this.insertHistoryBannerAndUpdateElementCurve(h?h:"");return}if(!o.rendered){for(k=null,v[0]==o.dataSource&&(this.container.innerHTML="",this.currentSuggestionList=[],this._currentSuggestion=null,this.selectedSuggestion=null,this.containsNextWordInWebSuggestions=!1,this._searchBox.removeAttribute("aria-activedescendant")),c=void 0,p=this._isNewDom?this.container.getElementsByTagName("DIV"):this.container.getElementsByTagName("UL"),l=0;l<p.length;l++)if(p[l].className.indexOf("sa_drw")!=-1){c=p[l];break}this.containsNextWordInWebSuggestions||(d=this.createDivFromAjaxResponse(o.suggestions),this.insertAjaxResponseDivIntoDom(c?c:this.container,d,k,o.dataSource),this.updateWidth(),this.config.boldEntity&&o.dataSource==="Web"&&this.UpdateClassForBoldEntity(),this.rqsPresent=this.rqspresent(),this.buildSuggestions(s,o.dataSource),o.dataSource==="Web"&&(this.containsNextWordInWebSuggestions=this.containsNextWord),this.config.enableAsPanelExpansion&&o.dataSource==="Web"&&this.shouldShowOtherSuggestions()?(this.config.backfillRichRequery&&(this.rqsPresent?this.serverGPCbackfillRichRequery():this.backfillRichRequery()),this.showSearchType(o.dataSource,this.config.enabledSearchTypes,c,s,this.config.maxSuggestionsToShow),this.config.IsRequeryPresent&&typeof Log!="undefined"&&typeof Log.Log!="undefined"&&(g="RS:"+this.rsCnt+"|PASF:"+this.pasfCnt+"|PAA:"+this.paaCnt,Log.Log("Requery","AS","RequeryInst",!1,"Namespace","AutoSuggest","EventType","Request","CustomData",g))):!this.config.enableAsPanelExpansion||this._highlightedRichLIElement||this.shouldShowOtherSuggestions()||(this.updateSearchBoxExpansionClasses(!1),this.isBNorrClassPresent&&t.AddClassName(document.body,w)),this.trendingNowMovedToRight=(this.config.moveTrendingNowToRight||this.config.zisPaneexpansion)&&this.config.enableAsPanelExpansion&&this.shouldMoveTrendingNowToRight(),this.isQueryNullOrWhiteSpace()&&this.trendingNowMovedToRight&&(this.updateSearchBoxExpansionClasses(!0),this.buildSuggestions(s,"TRR")));this.config.asshdw&&t.AddClassName(this._searchBoxForm,it);this._previousQuery=this._currentQuery;(this.config.moveTrendingNowToRight||this.config.zisPaneexpansion)&&this.config.enableAsPanelExpansion&&this.isQueryNullOrWhiteSpace()?this._searchTypeDivs=_d.querySelectorAll(".sa_zis_parent"):this.config.enableAsPanelExpansion&&this.hasAsExpanded?this._searchTypeDivs=_d.querySelectorAll(".sa_as ul"):(this._searchTypeDivs=undefined,this.searchTypeDivIndex=0);o.rendered=!0;o.dataSource==n.DataSources.Web&&s.length>0&&this.config.bi&&(nt={currentQuery:r,suggestionElements:s,requestSequence:u},sj_evt.fire("AS.SuggestionsRendered",nt));s.length>0?(sj_evt.fire("AS.Canvas.Show"),this.config.asLowNetworkScneario&&(this.config.enableAsPanelExpansion&&(this.hasAsExpanded||this.trendingNowMovedToRight)?this.updateSearchBoxExpansionClasses(!0):this.config.enableEASE&&(this._highlightedRichLIElement&&this.removeEASEClasses(this._highlightedRichLIElement),tt=this._suggestionsContainer.getElementsByTagName("LI")[0],this.pollForEASE(tt)),this.container.style.display=="none"&&(this.config.asOnSBRound&&n.Utils.AddClassName(this._searchBoxForm,y),this.container.style.display="block")),this.raiseEvent(10,r,s,u,this.container,o.dataSource,e),this.config.asOnSBRound&&n.Utils.AddClassName(this._searchBoxForm,y)):this.config.enableAlwaysUpdateQFC&&o.dataSource==n.DataSources.Web&&this.autoSuggestInstance.raiseUpdateText(this._currentQuery,!1);this.currentSuggestionList.length===0&&(sj_evt.fire("AS.Canvas.Hide"),v[v.length-1]==o.dataSource?this.raiseEvent(11,r):f===n.DataSources.Web&&this.raiseEvent(24,r))}}this.insertHistoryBannerAndUpdateElementCurve(h?h:"")},st.prototype.pollForEASE=function(n){var i=this,t;n===void 0&&(n=null);this._easePollingInterval&&(this._easePollingInterval=this.config.easePI);n!==null?(t=this.checkWhetherEASEChildSuggestionsArePresent(n),t&&(this.isSuggestionNullOrUndefined(this._currentSuggestion)||this._currentSuggestion===n)&&(this._highlightedRichLIElement=n,this.addEASEClasses(this._highlightedRichLIElement))):this.isSuggestionNullOrUndefined(this._highlightedRichLIElement)?this.isSuggestionNullOrUndefined(this._currentSuggestion)||this.checkWhetherEASEChildSuggestionsArePresent(this._currentSuggestion)&&(this._highlightedRichLIElement=this._currentSuggestion,this.addEASEClasses(this._highlightedRichLIElement)):this.isSuggestionNullOrUndefined(this._currentSuggestion)?this.container.style.display=="none"&&(this.removeEASEClasses(this._highlightedRichLIElement),this._highlightedRichLIElement=null):this._enteredChildSuggestionPane||this._currentSuggestion===this._highlightedRichLIElement||(this.removeEASEClasses(this._highlightedRichLIElement),this._highlightedRichLIElement=null,this.checkWhetherEASEChildSuggestionsArePresent(this._currentSuggestion)&&(this._highlightedRichLIElement=this._currentSuggestion,this.addEASEClasses(this._highlightedRichLIElement)));sb_st(function(){return i.pollForEASE()},this._easePollingInterval)},st.prototype.isSuggestionNullOrUndefined=function(n){return n===null||n===undefined?!0:!1},st.prototype.checkWhetherEASEChildSuggestionsArePresent=function(n){var t;return(n===null||n===void 0?void 0:n.className.indexOf("sa_ent"))!==-1&&((t=n===null||n===void 0?void 0:n.lastElementChild)===null||t===void 0?void 0:t.className.indexOf("sa_expand"))!==-1},st.prototype.addEASEClasses=function(n){var u,r,i,f,e;if(this.updateSearchBoxExpansionClasses(!0),u=document.querySelector(".sa_as"),t.AddClassName(u,"as_expand"),t.AddClassName(n,rt),n.querySelector(".sa_expand"))for(this.updateSearchBoxExpansionClasses(!0),r=n.getElementsByTagName("UL"),i=0;i<r.length;i++)f=r[i],t.AddClassName(f,"sa_drw");e="isEASEPresent:true";Log.Log("EASE","AS","EASEInst",!1,"Namespace","AutoSuggest","EventType","Hide","CustomData",e)},st.prototype.removeEASEClasses=function(n){var i=n.getElementsByTagName("UL"),r,f,u,e;if(i!==undefined&&i!==null)for(r=0;r<i.length;r++)f=i[r],t.RemoveClassName(f,et);t.RemoveClassName(n,ft);u=document.querySelector(".sa_as");u!==null&&t.RemoveClassName(u,ut);this.updateSearchBoxExpansionClasses(!1);e="isEASEPresent:false";Log.Log("EASE","AS","EASEInst",!1,"Namespace","AutoSuggest","EventType","Hide","CustomData",e)},st.prototype.updateRawQuery=function(n){this._rawQuery=n},st.prototype.isLeftSectionLongerForRichRequery=function(){var e,i=_d.querySelectorAll(".sa_as ul"),o=0,r=0,n,t,f;if(i.length>1){var s=34,u=i[0];for(n=0;n<((e=u===null||u===void 0?void 0:u.childNodes)===null||e===void 0?void 0:e.length);n++)o+=u.childNodes[n].offsetHeight;for(n=1;n<(i===null||i===void 0?void 0:i.length);n++){t=i[n];switch(t.className){case"paa_drw":case"rs_drw":for(f=0;f<(t===null||t===void 0?void 0:t.childNodes.length);f++)r+=t.childNodes[f].offsetHeight;r+=s;break;case"pasf_rich_drw":r+=t.offsetHeight+12+s}}r+=10}return o>r},st.prototype.backfillRichRequery=function(){var t=n.SearchTypeUtils.isResultTypePresent("PASF",this.config.enableRichRequeryPerf),r=n.SearchTypeUtils.isResultTypePresent("PAA",this.config.enableRichRequeryPerf),i=!1;(this.config.backfillPASFEMRS||this.config.backfillPASFEMPAA)&&(i=n.SearchTypeUtils.isResultTypePresent("PASFEM",this.config.enableRichRequeryPerf));switch(!0){case this.config.backfillPAARS:this.paaTriggerBackfillRichRequery(r,t,i);break;case this.config.prioritizePAAMinWords>0&&this._currentQuery&&this._currentQuery.trim().length!==0&&this._currentQuery.split(" ").length>=this.config.prioritizePAAMinWords:this.paaTriggerBackfillRichRequery(r,t,i);break;case this.config.prioritizePAAInterrogative&&this._currentQuery&&this._currentQuery.trim().length!==0&&this._currentQuery[this._currentQuery.length-1]==="?":this.paaTriggerBackfillRichRequery(r,t,i);break;case this.config.backfillPASFEMPAA&&!i&&t:this.config.enabledSearchTypes=["RS","PASF"];this.config.maxSuggestionsToShow=[3,5];break;case this.config.backfillPASFEMPAA&&!i&&!t:this.config.enabledSearchTypes=["RS","PAA"];this.config.maxSuggestionsToShow=[3,3];break;case this.config.backfillPASFEMRS:this.paaTriggerBackfillRichRequery(r,t,i);break;case!t:this.config.enabledSearchTypes=["RS","PAA"];this.config.maxSuggestionsToShow=[3,2]}},st.prototype.serverGPCbackfillRichRequery=function(){var i=n.SearchTypeUtils.isResultTypePresent("PASF",this.config.enableRichRequeryPerf),t=n.SearchTypeUtils.isResultTypePresent("PAA",this.config.enableRichRequeryPerf);switch(!0){case i:this.config.enabledSearchTypes=["PASF"];this.config.maxSuggestionsToShow=[5];break;case t&&this.config.prioritizePAAMinWords>0&&this._currentQuery&&this._currentQuery.trim().length!==0&&this._currentQuery.split(" ").length>=this.config.prioritizePAAMinWords:this.config.enabledSearchTypes=["PAA"];this.config.maxSuggestionsToShow=[3];break;case t&&this.config.prioritizePAAInterrogative&&this._currentQuery&&this._currentQuery.trim().length!==0&&this._currentQuery[this._currentQuery.length-1]==="?":this.config.enabledSearchTypes=["PAA"];this.config.maxSuggestionsToShow=[3];break;default:this.config.enabledSearchTypes=["RS"];this.config.maxSuggestionsToShow=[3]}},st.prototype.paaTriggerBackfillRichRequery=function(n,t,i){switch(!0){case n&&i:this.config.enabledSearchTypes=["PAA","PASFEM"];this.config.maxSuggestionsToShow=[3,5];break;case n&&t:this.config.enabledSearchTypes=["PAA","PASF"];this.config.maxSuggestionsToShow=[3,5];break;case!n&&i:this.config.enabledSearchTypes=["RS","PASFEM"];this.config.maxSuggestionsToShow=[3,5];break;case!n&&t:this.config.enabledSearchTypes=["RS","PASF"];this.config.maxSuggestionsToShow=[3,5];break;case n:this.config.enabledSearchTypes=["PAA","RS"];this.config.maxSuggestionsToShow=[3,3];break;case!t:this.config.enabledSearchTypes=["RS","PAA"];this.config.maxSuggestionsToShow=[3,3]}},st.prototype.showSearchType=function(n,i,r,u,f){var o,e;if(u===void 0&&(u=[]),o=this.addOtherSuggesstionsOnASPanel(i,f),o!==undefined)for(this.hasAsExpanded=!0,this.isBNorrClassPresent=document.body.classList.contains("b_norr"),this.config.enableAsPanelExpansion&&this.isBNorrClassPresent&&t.RemoveClassName(document.body,ot),this.insertAjaxResponseDivIntoDom(r?r:this.container,o,f.reduce(function(n,t){return n+t},0),n),e=0;e<i.length;++e)this.buildSuggestions(u,i[e]);else this.updateSearchBoxExpansionClasses(!1),this.config.enableAsPanelExpansion&&this.isBNorrClassPresent&&t.AddClassName(document.body,w)},st.prototype.shouldMoveTrendingNowToRight=function(){var n=_d.querySelectorAll("#sa_requery.ra_drw");return n===undefined||(n===null||n===void 0?void 0:n.length)===0?!1:this.isQueryNullOrWhiteSpace()},st.prototype.isQueryNullOrWhiteSpace=function(){var n;return this._currentQuery===""||this._currentQuery!==undefined&&((n=this._currentQuery)===null||n===void 0?void 0:n.trim())===""},st.prototype.rqspresent=function(){if(!this.config.enableGPCRequeryExpandedPane)return!1;var n=_d.querySelectorAll("#sa_gpcrequery.sa_drw");return n===undefined||(n===null||n===void 0?void 0:n.length)===0?!1:(this.hasAsExpanded=!0,!0)},st.prototype.addOtherSuggesstionsOnASPanel=function(n,t){var f,r="",i;for(this.rsCnt=0,this.pasfCnt=0,this.paaCnt=0,i=0;i<n.length;++i){var e=this.getSuggestionsAndLabel(n[i],t[i]),u=e[0],o=e[1];u&&u.length!==0&&(r+=o+u)}return r&&r.length!==0&&(f=this.createDivFromAjaxResponse("<div class='sa_drw' id='sa_requery'>".concat(r,"<\/div>"))),f},st.prototype.getSuggestionsAndLabel=function(t,i){if(typeof n.SearchTypeUtils=="undefined")return["",""];var e="",u="",f="",r;switch(t){case h.RS:r=n.SearchTypeUtils.getRsSuggestions(this._previousQuery,this._currentQuery,i,this.currentSuggestionList,this.config.asrschat,this.config.maxRSSuggLenLimitRichRequery,this.config.enableRichRequeryPerf,this.config.enableRichRequeryFitNFinish);e=r===null||r===void 0?void 0:r.suggestions;f="rs_tx";u=(sa_loc===null||sa_loc===void 0?void 0:sa_loc.RelatedSearches)||"Related Searches";this.config.enableRichRequeryFitNFinish&&(u=u.toUpperCase(),f="rs_tx rs_tx_fnf");this.rsCnt=r===null||r===void 0?void 0:r.sugCount;break;case h.PAA:r=n.SearchTypeUtils.getPaaAnswers(this._previousQuery,this._currentQuery,i,this.config.hitHighlightPaa,this.currentSuggestionList,this.config.aspaachat,this.config.maxPAASuggLenLimitRichRequery,this.config.enableRichRequeryPerf,this.config.enableRichRequeryFitNFinish);e=r===null||r===void 0?void 0:r.suggestions;f="paa_tx";u=(sa_loc===null||sa_loc===void 0?void 0:sa_loc.PeopleAlsoAsk)||"People Also Ask";this.config.enableRichRequeryFitNFinish&&(u=u.toUpperCase(),f="paa_tx paa_tx_fnf");this.paaCnt=r===null||r===void 0?void 0:r.sugCount;break;case h.PASF:r=n.SearchTypeUtils.getPASFData(this._previousQuery,this._currentQuery,i,this.currentSuggestionList,this.config.rrboxshadow,this.config.enableRichRequeryPerf,this.config.enableRichRequeryFitNFinish);e=r===null||r===void 0?void 0:r.suggestions;f="pasf_tx";u=(sa_loc===null||sa_loc===void 0?void 0:sa_loc.PeopleAlsoSearchFor)||"People Also Search For";this.config.enableRichRequeryFitNFinish&&(u=u.toUpperCase(),f="pasf_tx pasf_tx_fnf");this.pasfCnt=r===null||r===void 0?void 0:r.sugCount;break;case h.PASFEM:r=n.SearchTypeUtils.getPASFEMData(this._previousQuery,this._currentQuery,i,this.currentSuggestionList,this.config.rrboxshadow,this.config.enableRichRequeryPerf,this.config.enableRichRequeryFitNFinish);e=r===null||r===void 0?void 0:r.suggestions;f="pasf_tx";u=sa_loc.PeopleAlsoSearchFor||"People Also Search For";this.config.enableRichRequeryFitNFinish&&(u=u.toUpperCase(),f="pasf_tx pasf_tx_fnf");this.pasfCnt=r===null||r===void 0?void 0:r.sugCount;break;default:e="";f="";u=""}return e===""?["",""]:[e,this._isNewDom?"<div class='".concat(f,"'><h2 class='asSectionHeading'>").concat(u,"<\/h2><\/div>"):"<h2 class='".concat(f,"'>").concat(u,"<\/h2>")]},st.prototype.shouldShowOtherSuggestions=function(){var n=_d.querySelectorAll("#sa_ul li");return n===undefined||n.length==0?!1:(this._hasPrefixQueryBeenUpdated=this._previousQuery==""||this._hasPrefixQueryBeenUpdated||this._previousQuery!==undefined&&this._previousQuery!==this._currentQuery,!this._hasPrefixQueryBeenUpdated)},st.prototype.getSuggestionsContainer=function(n){return n&&n.length>0?n[0]:null},st.prototype.setSuggestionContainerToBuild=function(t){var i;this._suggestionsContainer=null;switch(t){case n.DataSources.Web:this.rqsPresent?(i=_d.querySelectorAll(".sa_as"),this._suggestionsContainer=this.getSuggestionsContainer(i)):this._suggestionsContainer=_ge(this.config.slid);break;case n.SearchTypeUtils.RelatedSearch:i=_d.querySelectorAll(".sa_as .rs_drw");this._suggestionsContainer=this.getSuggestionsContainer(i);break;case n.SearchTypeUtils.PeopleAlsoAsk:i=_d.querySelectorAll(".sa_as .paa_drw");this._suggestionsContainer=this.getSuggestionsContainer(i);break;case n.SearchTypeUtils.PeopleAlsoSearchFor:i=_d.querySelectorAll(".sa_as .pasf_rich_drw");this._suggestionsContainer=this.getSuggestionsContainer(i);break;case n.SearchTypeUtils.PeopleAlsoSearchForExploreMore:i=_d.querySelectorAll(".sa_as .pasf_rich_drw");this._suggestionsContainer=this.getSuggestionsContainer(i);break;case n.SearchTypeUtils.TrendingNowOnRight:i=_d.querySelectorAll("#sa_requery.ra_drw");this._suggestionsContainer=this.getSuggestionsContainer(i);break;default:this._suggestionsContainer=_ge(this.config.slid)}},st.prototype.isSuggestionHistory=function(n){var t,i;return((t=n.url)===null||t===void 0?void 0:t.indexOf("qs=HS"))!=-1||((i=n.url)===null||i===void 0?void 0:i.indexOf("asbe=HS"))!=-1},st.prototype.buildSuggestions=function(i,r){var p=this,h,c,l,a,v,y,f,o;if(this._nextWordRawQuerySize=null,this._largestSuggestion=0,this._nextWordRawQuerySize=1e4,this.containsNextWord=!1,this.mnwSuggestionsCount=0,y=!1,this.setSuggestionContainerToBuild(r),this._suggestionsContainer){f=null;f=this._suggestionsContainer.getElementsByTagName("li");var w=10,k=this.currentSuggestionList.length,d=f.length,g=function(r){var o=f[r],g=void 0,d,tt,nt,it;if(u._isNewDom&&(g=(h=o.parentNode)===null||h===void 0?void 0:h.parentNode),d=o.parentNode,d&&d.id!==u.config.slid&&d.id!=="sa_exp_sug"&&!d.getAttribute(s)&&d.className!=="sa_mnw_region"&&d.className!==n.suggestionParentClass&&(g===null||g===void 0?void 0:g.id)!==u.config.slid&&!(g===null||g===void 0?void 0:g.classList.contains(u.config.zisParent))&&(g===null||g===void 0?void 0:g.className)!=="sa_mnw_region"&&!((u.config.moveTrendingNowToRight||u.config.zisPaneexpansion)&&u.config.enableAsPanelExpansion)&&b.indexOf(d.id)===-1)return"continue";if(o.className.indexOf("sa_hd")!=-1)return o.hd=!0,"continue";t.RewriteAttribsToProps(o,[e.Url,e.Query,e.Type,e.Autocomplete,e.RequestGuid,e.AdQuery,e.GhostingText]);u.config.zisr1>0&&n.ZisRankableBanners.indexOf(o.stype)!=-1&&u.updateShowCount(o.stype);o.stype&&(u.isSuggestionHistory(o)?u.ariaHideSuggestionChildren(o,!0):o.ariaLabel!==null?u.ariaHideSuggestionChildren(o,!1):(u.ariaHideSuggestionChildren(o,!1),tt="",o.stype.indexOf("NW")!=0||y||u.config.isMobile||u.config.iscxtab||(nt=u.isSpyGlassPresent(o),u.resizeNextWord=!nt,((l=(c=o.lastChild)===null||c===void 0?void 0:c.firstChild)===null||l===void 0?void 0:l.innerText)&&(it=o.lastChild.firstChild.innerText.indexOf("...")==0,u.isFirstNWFullEnabled=nt&&it,y=!0)),o.innerText&&(u.isFirstNWFullEnabled&&o.stype.indexOf("NW")==0?o.setAttribute("aria-label",o.innerText.substr(4)):o.setAttribute("aria-label",o.innerText+tt))));o.className.indexOf("pp_tile")!=-1&&(o.panel={ot:sb_gt()});o.stype&&u.isSuggestionTypeInstrumentationDisabled(o.stype)||(o.addInst=!0);o.stype&&u.isNavigationalSuggestion(o.stype)&&(o.nav=!0);u.config.mnw&&(o.stype=="MNW"||o.stype=="MNWU"||o.stype=="MNWB"||o.stype=="MNWT"||o.stype=="MNWF")&&(u.mnwSuggestionsCount+=1);u.buildNextWordSuggestions(o);((a=o===null||o===void 0?void 0:o.ariaLabel)===null||a===void 0?void 0:a.indexOf("Clicking on this will redirect to Work Vertical"))==-1&&u.currentSuggestionList.push(o.query);((v=d===null||d===void 0?void 0:d.parentElement)===null||v===void 0?void 0:v.className)==="sa_expand"?u.decorateChildSuggestion(o,++w):u.decorateSuggestion(o,++k);o.parentElement.classList.contains(n.suggestionParentClass)&&(sj_be(o.parentElement,"mousemove",function(n){return p.mouseOverSuggestionHandler(n,o)}),sj_be(o.nextElementSibling,"keydown",function(n){n.preventDefault();p._searchBox.dispatchEvent(new KeyboardEvent("keydown",{keyCode:n.keyCode}))}));i.push(o)},u=this;for(o=0;o<d;++o)g(o)}},st.prototype.ariaHideSuggestionChildren=function(n,t){for(var i,r,u,e=((r=n.children)===null||r===void 0?void 0:r.length)||0,f=0;f<e;f++)i=n.children[f],i&&(((u=i.classList)===null||u===void 0?void 0:u.contains("sa_rm"))&&t||i.setAttribute("aria-hidden","true"))},st.prototype.buildNextWordSuggestions=function(n){var t,i;this.config.eNw&&n.stype&&n.stype.indexOf("NW")>-1&&(this.containsNextWord=!0,this.resizeNextWord&&(t=n.textContent||n.innerText,t&&(i=n.query.replace(t,""),t.length>this._largestSuggestion&&i.length<=this._nextWordRawQuerySize&&(this._largestSuggestion=t.length,this._nextWordRawQuerySize=i.length,this.largestNextWordElement=n))))},st.prototype.isSuggestionTypeInstrumentationDisabled=function(n){for(var r,t=0,i=d;t<i.length;t++)if(r=i[t],r===n)return!0;return!1},st.prototype.isNavigationalSuggestion=function(n){for(var r,t=0,i=g;t<i.length;t++)if(r=i[t],r===n)return!0;return!1},st.prototype.mouseOverSuggestionHandler=function(t,i,r){var f,e,o,u;r===void 0&&(r=!1);u=n.Utils.GetMouseCoords(t);i.url&&this._previousMouseCoords&&(this._previousMouseCoords.x!=u.x||this._previousMouseCoords.y!=u.y)?(this._previousMouseCoords=u,i.className.indexOf(c)==-1&&(this._enteredChildSuggestionPane=r,r&&(this._mainLIElement=(e=(f=i===null||i===void 0?void 0:i.parentElement)===null||f===void 0?void 0:f.parentElement)===null||e===void 0?void 0:e.parentElement,this._richCardHighlight=i&&((o=i.parentElement)===null||o===void 0?void 0:o.id)==="rich_card"?!0:!1),this.highlightSuggestion(i))):this._previousMouseCoords=this._previousMouseCoords||u},st.prototype.decorateChildSuggestion=function(t,i){var r=this;t.src=t.stype;t.ord=i;sj_be(t,"mousedown",function(n){r.cancelEventBubbling(n);r.onMouseDownSuggestion(n,t)});sj_be(t,"mouseup",function(n){r.cancelEventBubbling(n);r.onMouseUpSuggestion(n,t)});t.addEventListener("mousemove",function(n){r.cancelEventBubbling(n);r.mouseOverSuggestionHandler(n,t,!0)});t.addEventListener("mouseover",function(i){r.cancelEventBubbling(i);var u=n.Utils.MouseEnterLeave(function(n){return r.mouseOverSuggestionHandler(n,t,!0)},t);u(i)})},st.prototype.decorateSuggestion=function(t,i){var r=this,u;t.src=t.stype;t.ord=i;sj_be(t,"mousemove",function(n){r.mouseOverSuggestionHandler(n,t)});sj_be(t,"mouseover",function(i){var u=n.Utils.MouseEnterLeave(function(n){return r.mouseOverSuggestionHandler(n,t)},t);u(i)});sj_be(t,"mousedown",function(n){return r.onMouseDownSuggestion(n,t)});sj_be(t,"mouseup",function(n){r.cancelEventBubbling(n);r.onMouseUpSuggestion(n,t)});u=window.navigator.msPointerEnabled?"onMSPointerDown":"ontouchstart";u.toLowerCase()in _w&&sj_be(t,u.substr(2),function(n){if(t.it="m",n.pointerType)switch(n.pointerType){case n.MSPOINTER_TYPE_TOUCH:t.it="t";break;case n.MSPOINTER_TYPE_PEN:t.it="p"}else t.it="t"})},st.prototype.getSearchDivIndex=function(n){for(var t=0;t<this._searchTypeDivs.length;++t)if(this._searchTypeDivs[t].className.indexOf(n)>-1)return t;return 0},st.prototype.getTargetElementExpandZIS=function(t,i,u,f){var c,l,a,s,e,v,h;return(u===void 0&&(u=0),f===void 0&&(f=!0),a=o[i],s=r[i],t&&u>0&&this.isSuggestionElement(t))?t:t&&((c=t.classList)===null||c===void 0?void 0:c.contains(n.suggestionParentClass))&&f?this.getTargetElementExpandZIS(t.getElementsByTagName("LI")[0],i,u+1,!0):((t===null||t===void 0?void 0:t.id)=="sa_requery"||(t===null||t===void 0?void 0:t.classList.contains(this.config.zisParent)))&&f?this.getTargetElementExpandZIS(t[s],i,u+1):(t===null||t===void 0?void 0:t.tagName)=="UL"?this.getTargetElementExpandZIS(t.parentElement,i,u+1,!1):(i!=1||t||(this.searchTypeDivIndex=0),i!=0||t||(this.searchTypeDivIndex=this._searchTypeDivs.length-1),e=t?t[a]:this._searchTypeDivs[this.searchTypeDivIndex][s],i===2?(s=r[1],this.searchTypeDivIndex++,e=this._searchTypeDivs[this.searchTypeDivIndex][s]):i===3&&(s=r[1],this.searchTypeDivIndex--,e=this._searchTypeDivs[this.searchTypeDivIndex][s]),i!=0&&!e&&(t===null||t===void 0?void 0:t.classList.contains(this.config.zisParent))||(t===null||t===void 0?void 0:t.classList.contains("as_rmhswarning")))?(t=t.parentElement,e=t[a],!e)?null:this.getTargetElementExpandZIS(e,i,u+1):e&&!e.classList.contains("sa_rm")?(((l=e.classList)===null||l===void 0?void 0:l.contains(n.suggestionParentClass))&&(e=e.getElementsByTagName("LI")[0]),(e.classList.contains(this.config.zisParent)||e.id==="sa_ul"||e.id=="sa_requery")&&(s=="firstChild"?e=e.getElementsByTagName("UL")[0]:(v=e.getElementsByTagName("UL").length,e=e.getElementsByTagName("UL")[v-1])),this.isSuggestionElement(e)?e:this.getTargetElementExpandZIS(e[s],i,u+1,!0)):t?(h=t.parentElement,h.id==="sw_as")?null:h.parentElement.id=="sw_as"?null:this.getTargetElementExpandZIS(h,i,u+1,!1):null},st.prototype.getTargetElementExpandAs=function(t,i,u){var c,l,a,y,e,v;u===void 0&&(u=0);var p=o[i],h=r[i],f=t?t[p]:this._searchTypeDivs[this.searchTypeDivIndex][h];return i===2?(h=r[1],this.searchTypeDivIndex++,f=this._searchTypeDivs[this.searchTypeDivIndex][h]):i===3&&(h=r[1],this.searchTypeDivIndex--,f=this._searchTypeDivs[this.searchTypeDivIndex][h]),f?(((c=f.classList)===null||c===void 0?void 0:c.contains(n.suggestionParentClass))&&(f=f.getElementsByTagName("LI")[0]),y=f.getAttribute(s),y&&f.innerHTML||this._isNewDom&&f.tagName==="UL"?(f=f[h],this.isSuggestionElement(f)||(f=this.getTargetElementExpandAs(f,i,u+1))):this.isSuggestionElement(f)||(f=((l=f.classList)===null||l===void 0?void 0:l.contains("sa_rm"))?this.getTargetElementExpandAs(f.parentElement,i,u+1):this.getTargetElementExpandAs(f,i,u+1))):this._currentSuggestion&&(e=this._currentSuggestion.parentElement,this._isNewDom&&e.tagName==="UL"&&u<2?f=this.getTargetElementExpandAs(e,i,u+1):e!=t&&((a=e.classList)===null||a===void 0?void 0:a.contains(n.suggestionParentClass))?f=this.getTargetElementExpandAs(e,i,u+1):(this.searchTypeDivIndex=this.getSearchDivIndex(e.className),v=!1,this.searchTypeDivIndex===this._searchTypeDivs.length-1&&i===1&&(v=!0),this.searchTypeDivIndex=(this.searchTypeDivIndex+this._searchTypeDivs.length+(i===1?1:-1))%this._searchTypeDivs.length,this.unHighlightSuggestionHandler(),f=v?undefined:this.getTargetElementExpandAs(null,i,u+1))),f},st.prototype.getTargetElementEASEArrow=function(n,t,i,e){var c,l,a,v,p,h,s,w,y;if(i===void 0&&(i=0),e===void 0&&(e=!0),this._searchTypeDivs===undefined&&(this._searchTypeDivs=_d.querySelectorAll(".sa_as .sa_drw")),n&&(n===null||n===void 0?void 0:n.tagName)==="LI"&&((c=n.parentElement)===null||c===void 0?void 0:c.id)!=undefined&&f[(l=n.parentElement)===null||l===void 0?void 0:l.id]!=undefined&&(this.searchTypeDivIndex=f[n.parentElement.id]),p=((a=n===null||n===void 0?void 0:n.parentElement)===null||a===void 0?void 0:a.id)==="sa_exp_sug"?nt[t]:o[t],h=((v=n===null||n===void 0?void 0:n.parentElement)===null||v===void 0?void 0:v.id)==="sa_exp_sug"?u[t]:r[t],n&&i>0&&this.isSuggestionElement(n))return this._searchTypeDivs=undefined,n;if(n&&(n===null||n===void 0?void 0:n.tagName)=="DIV"&&e)return this.getTargetElementEASEArrow(n[h],t,i+1,!0);if((n===null||n===void 0?void 0:n.tagName)=="UL"&&e)return this.getTargetElementEASEArrow(n,t,i+1,!1);if(s=n?n[p]:this._searchTypeDivs[this.searchTypeDivIndex][h],t===2){if(!this._enteredChildSuggestionPane&&!this.checkWhetherEASEChildSuggestionsArePresent(n)&&!this._richCardHighlight)return n;this._enteredChildSuggestionPane?(this._richCardHighlight&&(this._enteredChildSuggestionPane=!1,this._richCardHighlight=!1,this.searchTypeDivIndex--,s=this._mainLIElement),this._richCardHighlight||s||(h=u[2],s=this._searchTypeDivs[this.searchTypeDivIndex][h])):(h=r[1],this.searchTypeDivIndex++,this._enteredChildSuggestionPane=!0,this._richCardHighlight=!0,this._currentSuggestion&&(this._mainLIElement=this._currentSuggestion),s=this._searchTypeDivs[this.searchTypeDivIndex][h])}else if(t===3){if(!this._enteredChildSuggestionPane&&!this.checkWhetherEASEChildSuggestionsArePresent(n)&&!this._richCardHighlight)return n;this._richCardHighlight?(this._enteredChildSuggestionPane=!1,this._richCardHighlight=!1,this.searchTypeDivIndex--,s=this._mainLIElement):this._enteredChildSuggestionPane&&!s?(h=u[3],s=this._searchTypeDivs[this.searchTypeDivIndex][h]):this._enteredChildSuggestionPane||(h=r[1],this.searchTypeDivIndex++,this._enteredChildSuggestionPane=!0,this._richCardHighlight=!0,this._currentSuggestion&&(this._mainLIElement=this._currentSuggestion),s=this._searchTypeDivs[this.searchTypeDivIndex][h])}else t===1?this._richCardHighlight?(this._richCardHighlight=!1,this.searchTypeDivIndex++,h=u[2],s=this._searchTypeDivs[this.searchTypeDivIndex][h]):this._enteredChildSuggestionPane&&(this._richCardHighlight=!0,this.searchTypeDivIndex--,h=u[3],s=this._searchTypeDivs[this.searchTypeDivIndex][h]):t===0&&this._enteredChildSuggestionPane&&(this._richCardHighlight?(this._richCardHighlight=!1,this.searchTypeDivIndex++,h=u[2],s=this._searchTypeDivs[this.searchTypeDivIndex][h]):(this._richCardHighlight=!0,this.searchTypeDivIndex--,h=u[3],s=this._searchTypeDivs[this.searchTypeDivIndex][h]));return(s&&!this.isSuggestionElement(s)&&(s=this.getTargetElementEASEArrow(s,t,i+1)),s&&!s.classList.contains("sa_rm"))?((s.classList.contains(this.config.zisParent)||s.id==="sa_ul"||s.id=="sa_exp_sug")&&(h=="firstChild"?s=s.getElementsByTagName("UL")[0]:(w=s.getElementsByTagName("UL").length,s=s.getElementsByTagName("UL")[w-1])),this.isSuggestionElement(s)?(this._searchTypeDivs=undefined,s):this.getTargetElementEASEArrow(s[h],t,i+1,!0)):n?(y=n.parentElement,y.id==="sw_as")?null:this.getTargetElementEASEArrow(y,t,i+1,!1):null},st.prototype.getTargetElementEASETab=function(t,i,u,e){var a,v,y,p,w,b,h,s,k,c,l;return(u===void 0&&(u=0),e===void 0&&(e=!0),this._searchTypeDivs===undefined&&(this._searchTypeDivs=_d.querySelectorAll(".sa_as .sa_drw")),t&&(t===null||t===void 0?void 0:t.tagName)==="LI"&&((a=t.parentElement)===null||a===void 0?void 0:a.id)!=undefined&&f[(v=t.parentElement)===null||v===void 0?void 0:v.id]!=undefined&&(this.searchTypeDivIndex=f[t.parentElement.id]),b=o[i],h=r[i],t&&u>0&&this.isSuggestionElement(t))?(this._searchTypeDivs=undefined,t):t&&((p=(y=t.parentElement)===null||y===void 0?void 0:y.classList)===null||p===void 0?void 0:p.contains(n.suggestionParentClass))&&e?this.getTargetElementEASETab(t.parentElement,i,u+1,!1):t&&(t===null||t===void 0?void 0:t.tagName)=="DIV"&&e?this.getTargetElementEASETab(t.getElementsByTagName("LI")[0],i,u+1,!0):(t===null||t===void 0?void 0:t.classList.contains("sa_expand"))&&e?this.getTargetElementEASETab(t[h],i,u+1):(t===null||t===void 0?void 0:t.tagName)=="UL"?t.parentElement.className=="sa_expand"?(++this.searchTypeDivIndex,t=t.parentElement,this.getTargetElementEASETab(t[b],i,u+1,!0)):this.getTargetElementEASETab(t.parentElement,i,u+1,!1):(s=t?t[b]:this._searchTypeDivs[this.searchTypeDivIndex][h],s&&!this.isSuggestionElement(s)&&(s=this.getTargetElementEASETab(s,i,u+1)),i===2?(h=r[1],this.searchTypeDivIndex++,this._enteredChildSuggestionPane=!0,this._currentSuggestion&&(this._mainLIElement=this._currentSuggestion),s=this._searchTypeDivs[this.searchTypeDivIndex][h]):i===3&&(this._enteredChildSuggestionPane=!1,this.searchTypeDivIndex--,s=this._mainLIElement),s&&!s.classList.contains("sa_rm"))?((s.classList.contains(this.config.zisParent)||s.id==="sa_ul"||s.id=="sa_exp_sug")&&(h=="firstChild"?s=s.getElementsByTagName("UL")[0]:(k=s.getElementsByTagName("UL").length,s=s.getElementsByTagName("UL")[k-1])),this.isSuggestionElement(s)?(this._searchTypeDivs=undefined,s):this.getTargetElementEASETab(s[h],i,u+1,!0)):t?(c=t.parentElement,l=c===null||c===void 0?void 0:c.parentElement,c.id==="sw_as")?null:l&&l.className==="sa_expand"&&this.searchTypeDivIndex==this._searchTypeDivs.length-1?(this.searchTypeDivIndex=this._searchTypeDivs.length-((w=l.querySelectorAll(".sa_drw"))===null||w===void 0?void 0:w.length),this.getTargetElementEASETab(l,i,u+1,!0)):this.getTargetElementEASETab(c,i,u+1,!1):null},st.prototype.getTargetElement=function(t,i){var e,h,c,l,y=o[i],a=r[i],u=t?t[y]:_ge(this.config.slid)[a],v,f;if(u){if(u.classList.contains(this.config.zisParent)&&(u=u.getElementsByTagName("UL")[0]),(e=u.classList)===null||e===void 0?void 0:e.contains("sa_rm"))return this.getTargetElement(u.parentElement,i);((h=u.classList)===null||h===void 0?void 0:h.contains(n.suggestionParentClass))&&(u=u.getElementsByTagName("LI")[0]);v=u.getAttribute(s);v&&u.innerHTML||this._isNewDom&&u.tagName==="UL"?(u=u[a],((c=u.classList)===null||c===void 0?void 0:c.contains(n.suggestionParentClass))&&(u=u.getElementsByTagName("LI")[0]),this.isSuggestionElement(u)||(u=this.getTargetElement(u,i))):this.isSuggestionElement(u)||(u=this.getTargetElement(u,i))}else this._currentSuggestion&&(f=this._currentSuggestion.parentNode,this.unHighlightSuggestionHandler(),f===t&&((l=f.classList)===null||l===void 0?void 0:l.contains(n.suggestionParentClass))&&(f=f.parentNode),f.classList.contains("sa_nestedList")?u=this.getTargetElement(f.parentNode,i):(f.getAttribute(s)||this._isNewDom&&f.tagName==="UL"||f.classList.contains(this.config.zisParent)||f.classList.contains(n.suggestionParentClass))&&(u=this.getTargetElement(f,i)));return u},st.prototype.isSuggestionElement=function(n){return n.url&&n.tagName==="LI"},st.prototype.selectItem=function(n){var i,r,u,t,f;t=this.isQueryNullOrWhiteSpace()?this.config.enableAsPanelExpansion?this.getTargetElementExpandZIS(this._currentSuggestion,n):this.getTargetElement(this._currentSuggestion,n):this.config.enableAsPanelExpansion&&this.hasAsExpanded?this.getTargetElementExpandAs(this._currentSuggestion,n):this.config.enableEASE?this.isQueryNullOrWhiteSpace()?this.getTargetElement(this._currentSuggestion,n):this.config.enblEASEKB?this.getTargetElementEASEArrow(this._currentSuggestion,n):this.getTargetElementEASETab(this._currentSuggestion,n):this.getTargetElement(this._currentSuggestion,n);t?(this.setSearchValue(t),this.highlightSuggestion(t,!0)):this.clearSelectedSuggestion();_ge&&(t?t.id&&((i=_ge(t.id))===null||i===void 0?void 0:i.scrollIntoView(!1)):((r=this._searchBox)===null||r===void 0?void 0:r.id)&&((u=_ge(this._searchBox.id))===null||u===void 0?void 0:u.scrollIntoView(!1)));t&&this.config.bi&&(f={currentQuery:this._currentQuery,suggestionElements:[t],requestSequence:this._currentRequestSequence},sj_evt.fire("AS.SuggestionSelected",f))},st.prototype.isClickOnElementWithClass=function(n,t){var i=n.target;return i&&i.className.indexOf(t)>-1},st.prototype.cancelEventBubbling=function(n){n=sj_ev(n);sj_sp(n)},st.prototype.highlightSuggestion=function(t,i){i===void 0&&(i=!1);this.unHighlightSuggestionHandler(t);this._currentSuggestion=t;t.parentElement.className==n.suggestionParentClass?this.addHighlightClassName(this._currentSuggestion.parentElement,i):this.addHighlightClassName(this._currentSuggestion,i);this._currentSuggestion!=t&&this.addHighlightClassName(t,i);this._searchBox.setAttribute("aria-activedescendant",t.id)},st.prototype.unHighlightSuggestionHandler=function(t){var i;t===void 0&&(t=null);this._currentSuggestion&&(((i=this._currentSuggestion.parentElement)===null||i===void 0?void 0:i.classList.contains(n.suggestionParentClass))?(this._searchBox.focus(),this.removeHighlightClassName(this._currentSuggestion.parentElement)):this.removeHighlightClassName(this._currentSuggestion),this._currentSuggestion=null)},st.prototype.updateSearchBoxExpansionClasses=function(n){n?(t.AddClassName(this._header,v),t.AddClassName(this._searchBoxForm,v)):(t.RemoveClassName(this._header,p),t.RemoveClassName(this._searchBoxForm,p))},st.prototype.clearSelectedSuggestion=function(){this.setSearchValue();this.unHighlightSuggestionHandler();this._searchBox.removeAttribute("aria-activedescendant")},st.prototype.addHighlightClassName=function(n,t){t===void 0&&(t=!1);l.test(n.className)||(n.className+=" "+c);t&&(a.test(n.className)||(n.className+=" "+tt))},st.prototype.removeHighlightClassName=function(n,i){i===void 0&&(i=!1);t.RemoveClassName(n,a);t.RemoveClassName(n,l)},st.prototype.onMouseDownSuggestion=function(n,t){n=sj_ev(n);var i=n.button;i==2?(this.cancelEventBubbling(n),sj_pd(n)):t.url&&(this.clickedSuggestion=t)},st.prototype.modifyUrl=function(n,t){var i=n.split("q="),r=i[0];return r+"q="+t+"&"+i[1].split("&")[1]},st.prototype.onMouseUpSuggestion=function(n,t){this.clickedSuggestion&&this.clickedSuggestion==t&&(this.config.boldEntity&&this.isClickOnElementWithClass(n,"entiybubble_a")&&(t.url=this.modifyUrl(t.url,n.target.target)),n=sj_ev(n),this.config.clickIco&&this.isClickOnElementWithClass(n,"as_icon")?this.raiseEvent(20,t,sj_et(n)):(this.config.mnw&&(t.stype=="MNW"||t.stype=="MNWU"||t.stype=="MNWB"||t.stype=="MNWT"||t.stype=="MNWF")?(this._currentQuery=this._currentQuery.substring(0,this._currentQuery.lastIndexOf(" ")+1).concat(this.clickedSuggestion.query),this.clickedSuggestion.query=this._currentQuery,this.clickedMNWSuggestionType=this.clickedSuggestion.stype,this.clickedMNWSuggestionPosition=this.config.mnwbtm?90+this.clickedSuggestion.ord-(this.currentSuggestionList.length-this.mnwSuggestionsCount):90+this.clickedSuggestion.ord,this.highlightSuggestion(this.clickedSuggestion),this.raiseEvent(25,this.clickedSuggestion)):(this.setSearchValue(this.clickedSuggestion),sj_evt.fire("AS.Navigate",t,"mouseup"),this.raiseEvent(4,t,!1,this.config.linkTarget)),this.clickedSuggestion=null))},st.prototype.searchBoxHasFocus=function(){return typeof this._searchBox!="undefined"&&typeof this._searchBox.getRootNode=="function"?this._searchBox.getRootNode().activeElement===this._searchBox:_d.activeElement==this._searchBox},st.prototype.setSearchValue=function(n){var t,i;this.raiseEvent(19,this.selectedSuggestion,n);this.selectedSuggestion=n;t=this._currentQuery;this.config.trimwsnr&&this._rawQuery&&this._rawQuery[this._rawQuery.length-1]==" "&&(t=t+" ");i="";n?i=n.rg?this.autoSuggestInstance.currentQuery:n.query:(i=t,this._enteredChildSuggestionPane=!1);this.raiseEvent(12,i)},st.prototype.getCssHolder=function(){var n=_ge("ajaxStyles"),t,i;return n||(n=sj_ce("div"),n.id="ajaxStyles",t=_ge("srchfrm"),i=t!=null&&typeof t.getRootNode!="undefined"&&t.getRootNode(),i&&i!=_d&&t?t.appendChild(n):sj_b.insertBefore(n,sj_b.firstChild)),n},st.prototype.insertScriptIntoDom=function(n){var r=this,t=sj_ce("script"),i;t.type=n.type;i=n.getAttribute("src");i?t.setAttribute("src",i):(t.setAttribute("data-bing-script","1"),t.text=n.innerHTML);n.parentNode.removeChild(n);this._asContainer.appendChild(t);sb_st(function(){r._asContainer.contains(t)&&r._asContainer.removeChild(t)},1)},st.prototype.insertStyleIntoDom=function(t){this._ie9orLower?(sj_ic(t.innerHTML),t.parentNode.removeChild(t)):(t.setAttribute("data-rms","1"),this.autoSuggestInstance.config.bi&&n.Utils.AddClassName(t,"bi_preserve"),this.getCssHolder().appendChild(t))},st.prototype.createDivFromAjaxResponse=function(n){if(!n)return undefined;var t=sj_ce("div");return t.innerHTML=n,t},st.prototype.insertAjaxResponseDivIntoDom=function(n,t,i){var r,e,u,f,o;if(t){for(r=_d.createDocumentFragment(),e=t.childNodes;e.length;){u=e[0];switch(u.tagName){case"SCRIPT":this.insertScriptIntoDom(u);break;case"STYLE":this.insertStyleIntoDom(u);break;default:i===null||i>0?(r.appendChild(u),i!=null&&i--):t.removeChild(u)}}f=n.getElementsByClassName("sa_drw sa_gpcrqy");this.hasAsExpanded&&this.rqspresent&&f!=null&&f.length>0&&r.getElementById("sa_requery")!=null?f[0].appendChild(r):this.hasAsExpanded&&_ge("as_foot")!=null?(o=_ge("as_foot"),n.insertBefore(r,o)):n.appendChild(r)}},st.prototype.isSpyGlassPresent=function(n){return n.firstChild&&n.firstChild.className?n.firstChild.className==="sa_sg_icon_area":!1},st.prototype.updateShowCount=function(t){var r,e=n.Utils.getItem(t),u,f,i;try{e?(i=JSON.parse(e),u=n.Utils.checkIfValidNumber(i.value)?i.value+1:1,f=(r=i.expiry)!==null&&r!==void 0?r:0):(u=1,f=0);n.Utils.setItem(t,u,f)}catch(o){n.Utils.setItem(t,1,0)}},st}(n.EventRegisterer);n.Canvas=k})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(n){var t;(function(n){var i="sa_nw",r=/(\s|^)sa_nw/g,u="sa_msn_nw",f=/(\s|^)sa_msn_nw/g,t=36,e=function(){function e(t,i,r){this.config=t;this._container=i;this._canvas=r;this.asContainerpaddingLeft=0;this.asContainerpaddingRight=0;this.asContainerborderLeft=0;this.asContainerborderRight=0;this._isRtl=n.Utils.GetComputedStyle(sj_b).direction=="rtl";this._isRtl&&this._container.setAttribute("dir","rtl");var u=document.querySelector(".sa_as");this._searchBoxElem=_ge(t.i);this._outerContainer=u?u:sj_ce("div","","sa_as");this._outerContainer.setAttribute("data-priority","2");this._outerContainer.setAttribute("aria-live","polite");this.hide();this._container.appendChild(this._outerContainer);this.inpOptimized()}return e.prototype.inpOptimized=function(){(_G===null||_G===void 0?void 0:_G.InpOpt)===!0&&(this.captureSearchBoxStyles(),this.onSearchBoxResize())},e.prototype.getSuggestionsDrawer=function(){return this._outerContainer},e.prototype.show=function(){this._outerContainer.style.display="block"},e.prototype.hide=function(){this._outerContainer.style.display="none"},e.prototype.setMargin=function(n,i){var r=0,u=0;return this.config.searchBoxSpyglass&&(r=this._isRtl?t:t*-1,u=this._isRtl?t*-1:t),this._isRtl?[i+u,n+r]:[n+u,i+r]},e.prototype.checkResizeObserverSupport=function(){return!!window.ResizeObserver},e.prototype.onSearchBoxResize=function(){var t=this,n;this.checkResizeObserverSupport()&&(n=new ResizeObserver(function(){t.captureSearchBoxStyles()}),n.observe(this._searchBoxElem))},e.prototype.captureSearchBoxStyles=function(){if(this._container&&this._container.parentNode){var t=this._container.parentNode;t&&(this.asContainerStyle=n.Utils.GetComputedStyle(t),this.asContainerStyle&&(this.asContainerpaddingLeft=this.toFloat(this.asContainerStyle.paddingLeft),this.asContainerpaddingRight=this.toFloat(this.asContainerStyle.paddingRight),this.asContainerborderLeft=this.toFloat(this.asContainerStyle.borderLeftWidth),this.asContainerborderRight=this.toFloat(this.asContainerStyle.borderRightWidth)))}},e.prototype.update=function(){var c,t,e,l,a,s;if(this.config.eNw&&this._canvas.resizeNextWord&&this._canvas.containsNextWord&&this._canvas.largestNextWordElement){this.setMargins(0,0);l=n.Utils.GetComputedStyle(this._searchBoxElem);sj_evt.fire("AS.Layout.NextWord.Show");n.Utils.AddClassName(this._outerContainer,i);this.config.enforceMsnNWStyle&&n.Utils.AddClassName(this._outerContainer,u);a=this._outerContainer.style.display;this.setCanvasVisibility("hidden","block");var o=this._canvas.largestNextWordElement,v=n.Utils.GetTextContent(o),h=this.getFirstChild(o),p=o.query.replace(v,""),w=h&&h.innerHTML.indexOf("<strong>")>-1,b=n.Utils.CalcWidth(o,h&&h.textContent||v,null,w),k=n.Utils.CalcWidth(o,p,l.fontSize);this.config.IsBingPrivate&&(s=_ge("as_foot"),t!=0||e!=0?s!=null&&(s.style.display="none"):s!=null&&(s.style.display="list-item"));var d=_ge(this.config.f)?_ge(this.config.f).offsetWidth:Number.MAX_VALUE,g=_ge("sa_ul")?_ge("sa_ul").offsetWidth:Number.MAX_VALUE,y=document.querySelector("#sb_form .b_logoArea"),nt=y?y.offsetWidth:0;t=Math.min(k+4,d-(g+nt+12));e=this._outerContainer.offsetWidth-t-b-this.getNwExtraSz(o)-4;c=this.setMargin(t,e);t=c[0];e=c[1];this.setCanvasVisibility("",a)}else sj_evt.fire("AS.Layout.NextWord.Hide"),n.Utils.RemoveClassName(this._outerContainer,r),this.config.enforceMsnNWStyle&&n.Utils.RemoveClassName(this._outerContainer,f),(_G===null||_G===void 0?void 0:_G.InpOpt)!=undefined&&((_G===null||_G===void 0?void 0:_G.InpOpt)!==!0||this.checkResizeObserverSupport())||this.captureSearchBoxStyles(),this._isRtl?(e=(this.asContainerpaddingRight+this.asContainerborderRight)*-1,t=this.asContainerborderLeft-this.asContainerpaddingLeft):(t=(this.asContainerpaddingLeft+this.asContainerborderLeft)*-1,e=this.asContainerborderRight-this.asContainerpaddingRight);this.setMargins(t,e);this._searchBoxElem!=null&&this._searchBoxElem.dir.length>0&&(this._outerContainer.dir=this._searchBoxElem.dir)},e.prototype.toFloat=function(n){var t=parseFloat(n);return isNaN(t)?0:t},e.prototype.setCanvasVisibility=function(n,t){this._outerContainer.style.visibility=n;this._outerContainer.style.display=t},e.prototype.setMargins=function(n,t){this._container.style.marginLeft=n+"px";this._container.style.marginRight=t+"px"},e.prototype.getFirstChild=function(n){return n&&n.childNodes&&n.childNodes.length>0&&n.childNodes[0]},e.prototype.getNwExtraSz=function(t){var r=this.getFirstChild(t),i;return r?(i=n.Utils.GetComputedStyle(r),this.toFloat(i.marginLeft)*2+this.toFloat(i.borderLeft)+this.toFloat(i.borderRight)):0},e}();n.Layout=e})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){function s(n){return typeof n=="number"?n:'"'+n.replace(/"/g,'\\"')+'"'}var h="SRCHHPGUSR",c="AS",u=4,i="AS.CurrentImpressionQuerySelected",f="AS.GlobalShowDropDown",t=sb_ie&&sb_de.style.opacity===undefined,e=-1,r=!1,o,l=function(l){function a(n,t,i){var u=l.call(this)||this,f,o,s;for(u.config=n,u.autosuggest=t,u.internalEventTrigger=i,u._pollInterval=0,u._pendingRequestCount=0,u._bRequeryOnTextChange=!0,u._hiddenFields=[],u._lastQuery="",u._lastRawQuery="",u._lastPSCQueryLength=0,u._showAsdropdown=!0,u._trimRegex=new RegExp("^\\s*","g"),u._removeSpacesRegex=new RegExp("\\s+","g"),u._lastTextChanged="",u._textChangeSequence=0,u._isSearchBoxWebComponent=!1,u._asContainer=u.getContainer(),u.debounceTimeout=null,u.debounceDelay=40,u.focusHistory=function(n){var t=_ge("as_foot");if(t&&t.style.display!="none"){u.autosuggest.canvas.clearSelectedSuggestion();u.autosuggest.canvas.searchTypeDivIndex=0;var i=t.querySelector(".as_rmhswarning.out_fd_side a"),f=t.querySelector(".as_bpr.as_bprtxt a"),r=i?i:f;if(r!=null){r.focus();n.preventDefault();return}}u.hideDropDownOnFocusChange()},u.onBlur=function(){var n=!_ge("fbpgdg");n&&document.activeElement.id=="sd_fdb"&&(u.autosuggest.canvas.clearSelectedSuggestion(),u.hideDropDownOnFocusChange(),_ge("sb_form_q").focus())},u.focusFeedback=function(n){var t=_ge("sb_fdb");if(t&&t.style.display!="none"){u.autosuggest.canvas.clearSelectedSuggestion();u.autosuggest.canvas.searchTypeDivIndex=0;t.focus();t.onblur=u.onBlur;n.preventDefault();return}u.hideDropDownOnFocusChange()},u.onScrollHandler=function(){u.searchBox&&u._asSubContainer&&(u.searchBox.blur(),sj_ue(u._asSubContainer,"scroll",u.onScrollHandler))},u.disableRedirectForVSOnSERP=function(){var n,t=(n=document.documentElement.querySelector(".errcntr"))===null||n===void 0?void 0:n.hasAttribute("showerr");return t?!0:!1},u.searchBoxTouchAction=function(n){u.config.handleClickOnly||u.config.handleDuplicateFetch&&u._lastClickQuery==u.getCurrentQuery(!0)||(u.autosuggest.canvas.searchBoxHasFocus()||(u.searchBox.focus(),u.config.isCS&&sj_pd(n)),u.onSearchBoxClick(),u._lastClickQuery=u.getCurrentQuery(!0))},u.addSearchBoxLeftSpyglass=function(){var n=_ge("sb_leftsg"),t;n||(n=sj_ce("div","sb_leftsg"),n.style.display="none",u.searchBox.parentNode.insertBefore(n,u.searchBox));n.innerHTML===""&&(t='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 25 25"><path stroke="#767676" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M23.75 23.75l-9-9"><\/path><circle stroke="#767676" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10" cx="9" cy="9" r="7.75" fill="none"><\/circle><path fill="none" d="M25 25h-25v-25h25z"><\/path><\/svg>',n.innerHTML=t)},u.searchBoxClickAction=function(n){u._lastClickQuery==u.getCurrentQuery(!0)&&u.autosuggest.canvas.searchBoxHasFocus()||(u.searchBox.focus(),u.config.isCS&&sj_pd(n),u.config.handleDuplicateFetch&&(u._lastClickQuery=u.getCurrentQuery(!0)),u.onSearchBoxClick());u.config.handleDuplicateFetch||(u._lastClickQuery=null)},u.submitFormParams=function(n,t){if(Log.LogFilterFlare&&Log.LogFilterFlare([t]),u.config.enblmsspltred&&(n=u.autosuggest.canvas.firstSuggestion,n)){u.searchBox.value=n===null||n===void 0?void 0:n.q;var i=new URL(n===null||n===void 0?void 0:n.u,"https://bing.com"),r=i.searchParams.get("filters");u.submitForm(!0,null,r);return}u.submitForm(!0)},u.onSubmit=function(n){var r,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,t,i;if((u.cancelDefaultHandler(n),!u.disableRedirectForVSOnSERP())&&(typeof SearchBoxAttachmentManager=="undefined"||!SearchBoxAttachmentManager.getSearchBoxAttachmentManager().shouldDisableFormSubmit(n))){if(!u.config.ascontainer&&u.config.ghostingWithGreyText&&u._ghostingText&&u.searchBox.value==u._prefixText&&(b=u._ghostingText.length,k=u._prefixText.length,u.searchBox.value=k-b>0?u._prefixText.slice(0,k-b):u._prefixText,u._ghostingText=null),u.isEmptyQuery()){d=_w._H&&_w._H.sbeb;d&&sb_st(function(){return u.hideDropDown(2)},5);return}if(sb_st(function(){return u.hideDropDown(2)},5),t=u.autosuggest.canvas.selectedSuggestion,sj_evt.fire("AS.Navigate",t,"submit"),t)u.config.ascsr?(t=t,u.navigateJSON(t.id,t.q,t.u,!0)):u.navigate(t,!0,u.config.linkTarget);else{if(u.autosuggest.canvas.firstSuggestion&&(u.autosuggest.canvas.firstSuggestion.t==="HS"||((r=u.autosuggest.canvas.firstSuggestion)===null||r===void 0?void 0:r.bt)==="HS")){u.submitForm(!0);return}if(u.autosuggest.canvas.firstSuggestion&&(((f=u.autosuggest.canvas.firstSuggestion.t)===null||f===void 0?void 0:f.indexOf("NW"))===0||((o=(e=u.autosuggest.canvas.firstSuggestion)===null||e===void 0?void 0:e.bt)===null||o===void 0?void 0:o.indexOf("NW"))===0)){u.submitForm(!0);return}if(u.autosuggest.canvas.firstSuggestion){i=null;u.config.msspltredir?i="msspltredir":u.config.msspltredirb?i="msspltredirb":u.config.msspltredirc?i="msspltredirc":u.config.msspltredird&&(i="msspltredird");switch(i){case"msspltredir":u.autosuggest.canvas.firstSuggestion.t=="MB"&&(((s=u.autosuggest.canvas.firstSuggestion)===null||s===void 0?void 0:s.bt)=="SC"||((h=u.autosuggest.canvas.firstSuggestion)===null||h===void 0?void 0:h.bt)=="OS")||u.minEditDistance(u.searchBox.value,(c=u.autosuggest.canvas.firstSuggestion)===null||c===void 0?void 0:c.q)<=2?u.submitFormParams(t,i):u.submitForm(!0);break;case"msspltredirb":u.autosuggest.canvas.firstSuggestion.t=="MB"&&(((l=u.autosuggest.canvas.firstSuggestion)===null||l===void 0?void 0:l.bt)=="SC"||((a=u.autosuggest.canvas.firstSuggestion)===null||a===void 0?void 0:a.bt)=="OS")?u.submitFormParams(t,i):u.submitForm(!0);break;case"msspltredirc":u.autosuggest.canvas.firstSuggestion.t=="MB"&&u.minEditDistance(u.searchBox.value,(v=u.autosuggest.canvas.firstSuggestion)===null||v===void 0?void 0:v.q)<=2?u.submitFormParams(t,i):u.submitForm(!0);break;case"msspltredird":u.autosuggest.canvas.firstSuggestion.t=="MB"&&(((y=u.autosuggest.canvas.firstSuggestion)===null||y===void 0?void 0:y.bt)=="SC"||((p=u.autosuggest.canvas.firstSuggestion)===null||p===void 0?void 0:p.bt)=="OS")&&u.minEditDistance(u.searchBox.value,(w=u.autosuggest.canvas.firstSuggestion)===null||w===void 0?void 0:w.q)<=2?u.submitFormParams(t,i):u.submitForm(!0);break;default:u.submitForm(!0)}return}u.submitForm(!0)}}},u.onSearchBoxKeyDown=function(n){var s,h,f=n.keyCode,c,t,o,a,i;u._ghostingText=null;c=(f==38||f==40)&&e==229&&!r;t=document.querySelector(".sa_hv");switch(f){case 13:if(u.config.isCS){sb_st(function(){return u.hideDropDown(2)},5);break}if(u.config.enableNewlineByShiftEnter){if(u.config.submitOnEnter&&!n.shiftKey){u.onSubmit(n);break}n.shiftKey&&_w.Log&&Log.Log&&Log.Log("Autosuggest","SerpSearchBoxKeyDown","ShiftEnter");break}if(u.config.submitOnEnter)u.onSubmit(n);break;case 27:u.isQueryGhosted()||(u.hideDropDown(1),u.cancelDefaultHandler(n));break;case 38:u._isLayoutVisible&&(u.config.waitForCompositionEnd&&c?u.imeCheckForJapanese():u.config.ascsr?(u.searchBox.focus(),sj_evt.fire("AS.KeyBoardUp"),u.config.isCS&&CopilotSearch.AutoSuggest.handleResize(),u.onEntitySugSelection()):u.autosuggest.canvas.selectItem(0),u.cancelDefaultHandler(n));break;case 40:u._isLayoutVisible?u.config.waitForCompositionEnd&&c?u.imeCheckForJapanese():u.config.ascsr?(u.searchBox.focus(),sj_evt.fire("AS.KeyBoardDown"),u.config.isCS&&CopilotSearch.AutoSuggest.handleResize(),u.onEntitySugSelection()):u.autosuggest.canvas.selectItem(1):u.config.fetchOnDownArrowKey&&u.fetchForCurrentQuery();break;case 37:u._isLayoutVisible&&(u.config.ascsr&&u.config.enableEASE&&t?(sj_evt.fire("AS.KeyBoardLeft"),n.preventDefault(),u.onEntitySugSelection()):u.config.enableEASE&&u.config.enblEASEKB&&!u.autosuggest.canvas.hasAsExpanded&&!u.autosuggest.canvas.trendingNowMovedToRight&&t&&u._isLayoutVisible&&u.autosuggest.canvas.searchTypeDivIndex>=0&&(u.autosuggest.canvas.selectItem(3),o=document.querySelector(".sa_hv"),t!==o&&n.preventDefault()));break;case 39:u._isLayoutVisible&&(u.config.ascsr&&u.config.enableEASE&&t?(sj_evt.fire("AS.KeyBoardRight"),n.preventDefault(),u.onEntitySugSelection()):u.config.enableEASE&&u.config.enblEASEKB&&!u.autosuggest.canvas.hasAsExpanded&&!u.autosuggest.canvas.trendingNowMovedToRight&&t&&u._isLayoutVisible&&u.autosuggest.canvas.searchTypeDivIndex>=0&&(u.autosuggest.canvas.selectItem(2),o=document.querySelector(".sa_hv"),t!==o&&n.preventDefault()));break;case 9:u._searchDivs=document.querySelectorAll("#sa_ul");t=document.querySelector(".sa_sg.sa_ent.sa_hv");u._searchChildDiv=t?(s=t.lastElementChild)===null||s===void 0?void 0:s.querySelectorAll(".sa_sugg"):undefined;var v=u._searchDivs.length-1,y=u._searchChildDiv?u._searchChildDiv.length-1:0,l=u.autosuggest.canvas.searchTypeDivIndex,p=_ge("as_foot");if(!u.isQueryGhosted()){if(n.shiftKey){u._isLayoutVisible&&l>0&&u.config.enableAsPanelExpansion?(u.autosuggest.canvas.selectItem(3),n.preventDefault()):u.hideDropDownOnFocusChange();break}if(u._isLayoutVisible&&l<v&&u.config.enableAsPanelExpansion||u.config.enableEASE&&!u.config.enblEASEKB&&u._isLayoutVisible&&u._searchChildDiv!==undefined&&l<y){u.autosuggest.canvas.selectItem(2);n.preventDefault();break}if(u.config.CommonFooter==!0&&u._isLayoutVisible&&p!=null&&u.gaNtp(document.activeElement).id==u.config.i){u.focusHistory(n);break}if(u.config.removeSuggUrl&&u._isLayoutVisible&&((h=document.activeElement)===null||h===void 0?void 0:h.className)!=="sa_rm"){if(a=u.autosuggest.canvas.selectedSuggestion,!a){u.hideDropDownOnFocusChange();break}if(i=u.getSelectedSuggestionRemoveButton(),i){i.tabIndex=0;i.focus();i.onblur=u.onBlur;n.preventDefault();break}}u.focusFeedback(n)}}e=f},u.onASKeyDown=function(n){var t,i,r,f,e=_ge("sb_fdb"),o=_ge("as_foot"),s=n.keyCode;s==9&&(n.shiftKey?u._isLayoutVisible&&u.gaNtp(document.activeElement).id=="sb_fdb"&&o?u.focusHistory(n):(u.hideDropDownOnFocusChange(),_ge(u.config.i).focus(),n.preventDefault()):u.config.ascsr&&((t=document.activeElement)===null||t===void 0?void 0:t.id)=="as_foot_link"&&e?u.focusFeedback(n):(u.gaNtp(document.activeElement).className=="as_rmhswarningtxt"||((r=(i=u.gaNtp(document.activeElement))===null||i===void 0?void 0:i.parentElement)===null||r===void 0?void 0:r.className)=="as_bpr as_bprtxt")&&e?u.focusFeedback(n):((f=n.target)===null||f===void 0?void 0:f.className)!=="sa_rm"&&(u.hideDropDownOnFocusChange(),_ge(u.config.i).focus(),n.preventDefault()))},u.getSelectedSuggestionRemoveButton=function(){var f,t=u.autosuggest.canvas.selectedSuggestion,n,i,r;return t?(u.config.ascsr&&(t=document.getElementById(t.id)),n=t.firstElementChild,!n)?null:n.classList&&n.classList.contains("as_hr")?n:(i=n.lastElementChild,i&&i.classList&&i.classList.contains("sa_rm"))?i.firstElementChild:(r=t.nextElementSibling,r&&((f=r.classList)===null||f===void 0?void 0:f.contains("sa_rm")))?r:null:null},u.setshowAsDropDownValue=function(n){u._showAsdropdown=u.config.asmltbox?!0:n;u.autosuggest.isLongQuery=u.config.asmltbox?!1:!n},u.onSearchBoxClick=function(){u._ghostingText=null;var n=u.config.asbugfix?u._showAsdropdown:!0;u._isLayoutVisible||u.suppressRequestForQuery||!n||u.fetchForCurrentQuery()},u.onEntitySugSelection=function(){var t,n=(t=u.autosuggest.canvas)===null||t===void 0?void 0:t.selectedSuggestion,i;u.config.selectEntity&&u.isJSONSuggestion(n)&&n.t==="MB"&&(i='{ "q": "'.concat(n.q,'", "t": "').concat(n.t,'"}'),Log.Log("entitySugKey","AS","EASEInst",!1,"Namespace","AutoSuggest","EventType","Hide","CustomData",i))},u.hideDropDownOnFocusChange=function(n){u.hideDropDown(1,n);u._showAsdropdown==!1&&u.config.ascontainer&&u.raiseEvent(30)},u.onTextInput=function(){var n=u.searchBox.value;u.triggerTextChangedEvent(n);u.config.asevtdrv&&u.handleEventDrivenQueryChange()},u.clearSearchBox=function(n){u.clearQuery();u.searchBoxClickAction(n)},u.raiseEvent(5,n),f=0,o=a.ScopeExtensions;f<o.length;f++)s=o[f],s.init(u);return a.ScopeExtensions=[],u}return __extends(a,l),a.prototype.init=function(t){var c=this,l,o,s,u,a,v,i,f,h,e;(this.config.globalId=t,this.config.slid="sa_ul",this._bDisabled=this.isDisabled())||(_w._H&&_w._H.ajax?(l=_ge("serpHeader"),l&&(o=l.getElementsByTagName("form"),o&&o.length>0&&(this.searchForm=o[0],s=this.searchForm.getElementsByClassName("b_searchbox"),s&&s.length>0&&(this.searchBox=s[0])))):(this.searchForm=_ge(this.config.f),this.searchBox=_ge(this.config.i)),this.searchBox&&typeof this.searchBox.shadowRoot!="undefined"&&(this._isSearchBoxWebComponent=!0),this.searchForm&&this.searchForm.form&&(this.config.fc=this.searchForm.form.value),this._currentImpressionQuery=this.searchBox.value,u=this.getContainer(),!u&&_w.sa_initAsC&&typeof _w.sa_initAsC=="function"&&(_w.sa_initAsC(),u=this.getContainer()),sj_be(u,"mousedown",function(n){return sj_sp(n)}),u&&(u.style.display="block"),this.layout=this._layout=new n.Layout(this.config,u,this.autosuggest.canvas),this.layout.update(),this.registerUIElement(u),this.registerUIElement(this.searchBox),this.config.asmobfw&&(this._asSubContainer=document.querySelector(".sa_as"),this._asSubContainer&&this.searchBox&&sj_be(this.searchBox,"focus",function(){sj_be(c._asSubContainer,"scroll",c.onScrollHandler)})),a=_ge("sb_form_go"),a&&this.registerUIElement(a),this._pollInterval=this.config.d,this._pollThrottlingEnabled=this.config.t,v=this._layout.getSuggestionsDrawer(),this.autosuggest.init(this.config,v,this.searchBox),this._lastQuery=this.getQueryToFetch(),this.config.aszisear&&this.loadZisEarly(),this.searchBox.setAttribute("aria-autocomplete","both"),this.config.dsarialv||this.searchForm.setAttribute("aria-live","polite"),i=new n.EventRegistration(this),i.add(8,this.handleResponseReceived),i.add(11,this.startNoMatchTimeout),i.add(10,this.showDropDown),i.add(12,this.onUpdateText),i.add(13,this.onUpdateTextAndRequery),i.add(14,this.onUpdateGhostedText),i.add(4,this.navigate),i.add(17,this.dispose),this.autosuggest.registerEvents(i),this.config.isCS&&i.add(16,this.hideDropDown),this.internalEventTrigger&&(f=new n.EventRegistration(this),f.add(12,this.onUpdateText),f.add(4,this.navigateJSON),f.add(10,this.showDropDown),f.add(11,this.startNoMatchTimeout),this.internalEventTrigger.registerEvents(f)),this.config.asevtdrv&&(h=new MutationObserver(function(){c.handleEventDrivenQueryChange()}),h!==null&&h!==undefined&&h.observe(this.searchBox,{attributes:!0,attributeFilter:["value"]})),this.bindEvents(sj_be,sj_evt.bind),this.config.asdbc?this.config.asevtdrv?(this._lastRawQuery=this.getCurrentQuery(!0),this._lastQuery=this.getQueryToFetch()):this.debouncingAutosuggest():this.pollForQueryChange(),this.raiseEvent(6,this),this.config.ascontainer&&(e=document.querySelector("textarea#".concat(this.config.i)),e&&(e===null||e===void 0?void 0:e.rows)>1&&this.setshowAsDropDownValue(!1)),this.config.waitForCompositionEnd&&(this.searchBox.addEventListener("compositionend",function(){r=!0}),this.searchBox.addEventListener("compositionstart",function(){r=!1})))},a.prototype.setData=function(n){this.autosuggest.setData(n)},a.prototype.getCurrentImpressionQuery=function(){return this._currentImpressionQuery},a.prototype.isDisabled=function(){return!this.config.pv&&sj_cook.get(h,c)=="0"},a.prototype.registerUIElement=function(n){sj_be(n,"touchend",sj_sp);sj_be(n,"click",sj_sp)},a.prototype.addHiddenField=function(n,t){var i=sj_ce("input");return i.id="sa_"+n,i.name=n,i.value=t,i.type="hidden",this.searchForm.appendChild(i),this.config.sbt&&this._hiddenFields.push(i),i},a.prototype.cancelDefaultHandler=function(n){sj_sp(n);sj_pd(n)},a.prototype.loadZisEarly=function(){this.autosuggest.pretechQuery("")},a.prototype.show=function(){this.config.handleDuplicateFetch&&this._lastClickQuery!=this.getCurrentQuery(!0)&&(this._lastClickQuery=this.getCurrentQuery(!0));this.onSearchBoxClick()},a.prototype.getCursorPosition=function(){return n.Utils.getCursorPosition(this.searchBox,!0)},a.prototype.makeAutoSuggestGPingCall=function(n){var r,u,t=_ge(n.replace("&","")),o;if(t&&document.images){var e=t.getAttribute("h"),f=void 0,i={a:[],add:function(n,t){this.a.push(s(n)+":"+s(t))},get:function(){return this.a.length?"&PR={"+this.a.join(",")+"}":""}};this.config.ascsr&&this.config.isMobile&&(t.it="t");i.add("i",this.autosuggest.canvas.clickedSuggestion?t.it||"m":"k");this.autosuggest.ghostInstValue&&i.add("ghc",this.autosuggest.ghostInstValue);t.panel?i.add("et",sb_gt()-t.panel.ot):this.config.ascsr&&((u=(r=this.autosuggest.canvas.clickedSuggestion)===null||r===void 0?void 0:r.panel)===null||u===void 0?void 0:u.ot)&&i.add("et",sb_gt()-this.autosuggest.canvas.clickedSuggestion.panel.ot);f=this.autosuggest.data&&this.autosuggest.data.Inst?this.autosuggest.data.Inst.IG:null;f&&e&&(o=new Image,o.src=this.getGPingUrl()+"IG="+f+"&"+e+i.get())}return!0},a.prototype.getGPingUrl=function(){return _w&&_w.location&&_w.location.host&&_w.location.host.indexOf("bing.com")>-1&&_G.gpUrl?_G.gpUrl:"https://www.bing.com"+_G.gpUrl},a.prototype.navigate=function(t,i,r){var f=this,u;sb_st(function(){return f.hideDropDown(2)},5);this.config.zisr1>0&&n.ZisRankableBanners.indexOf(t.stype)!=-1&&this.updateLSOnClick(t.stype);this.makeAutoSuggestGPingCall(t.id);u=t.query;t.rg?this.updateSearchBoxValue(this.getLastRequestedQuery()):u!=undefined&&this.updateSearchBoxValue(u);this.config.logClickOnSuggestion&&(i?typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("Autosuggest","Suggestion","EnterClick",!1):typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("Autosuggest","Suggestion","MouseClick",!1));this.config.enbleClientPerfTelemetry&&typeof this.autosuggest.networkLatencyInfo!=undefined&&this.autosuggest.networkLatencyInfo&&this.logAutoSuggestNetworkLatency();this.config.sbt&&t.addInst&&!t.nav?this.submitForm(i,t.url):this.navigateToUrl(t,i,r)},a.prototype.redirectToSapphire=function(){if(typeof SAUpsellTrigger!="undefined")if(SAUpsellTrigger.setConfigs(this.config.sapphireSearchRedirectTimeout,this.config.maxSapphireSearchRedirect),SAUpsellTrigger.shouldRedirectToSapphire()){var n=this.getRedirectionPositionId();this.sapphireRedirectionLogger("SubmitFormHandler","RedirectToSapphire","PositionID",n);SAUpsellTrigger.queryNativelyByApp(this.searchForm,n,this.searchForm.submit.bind(this.searchForm))}else this.sapphireRedirectionLogger("SubmitFormHandler","RedirectionBlocked"),this.searchForm.submit();else this.sapphireRedirectionLogger("SubmitFormHandler","ScriptResourceNotLoaded"),this.searchForm.submit()},a.prototype.submitFormHandler=function(){this.config.enableSapphireSearchTrigger?this.config.blockIncognitoSapphireSearch&&this.config.isFirstSession?(this.sapphireRedirectionLogger("SubmitFormHandler","Incognito mode blocked"),this.searchForm.submit()):this.redirectToSapphire():this.searchForm.submit()},a.prototype.submitForm=function(n,t,r){var f,l,u,e,h,c,o;if(this.config.sbt){for(f=void 0;f=this._hiddenFields.shift();)f.parentNode==this.searchForm&&this.searchForm.removeChild(f);this._hiddenFields=[]}if(n&&(this.raiseEvent(15),this.config.bi&&this._currentImpressionQuery===this.searchBox.value)){sj_evt.fire(i);return}this._instrumentationData=this.autosuggest.getAllSuggestionInstObject(null,n,this.searchBox.value);(this.config.msspltredir||this.config.msspltredirb||this.config.msspltredirc||this.config.msspltredird)&&r&&(this._instrumentationData.filters=r);l=this.getCustomUrlParams(t);u=_ge("sa_ghc");u&&u.parentNode.removeChild(u);for(var a=0,s=void 0,v=[this._instrumentationData,l];s=v[a++];)for(e in s)u=_ge("sa_"+e),h=s[e],u?u.value=h:this.addHiddenField(e,h);this.autosuggest.ghostInstValue=0;n||sj_evt.fire("onSearch",this.searchForm);this.makeSearchboxGPingCall();this.fireEvt?(c=this.searchForm.getAttribute("action"),t&&this.searchForm.setAttribute("action",t),this.submitFormHandler(),this.firePartnerEvents(n),c&&this.searchForm.setAttribute("action",c)):_w._H&&_w._H.ajax&&_w.sj_isAjax&&n||this.submitFormHandler();this.fireEvt&&(this.autosuggest.canvas.selectedSuggestion=null,this.autosuggest.ghostInstValue=0,o=_ge("sa_ghc"),!this._instrumentationData.ghc&&o&&o.parentNode.removeChild(o));this.config.enbleClientPerfTelemetry&&typeof this.autosuggest.networkLatencyInfo!=undefined&&this.autosuggest.networkLatencyInfo&&this.logAutoSuggestNetworkLatency()},a.prototype.makeSearchboxGPingCall=function(){var t=this.searchForm.getAttributeNode("onsubmit"),n;t&&_w.si_T&&(n=t.value.match(/si_T\('(.*)'\)/),n&&n[1]&&_w.si_T(n[1]))},a.prototype.navigateToUrl=function(t,r,u){var f,e;if(this.searchForm.onsubmit)this.searchForm.onsubmit(null);if(this.firePartnerEvents(r),this.config.bi&&this._currentImpressionQuery===t.query){sj_evt.fire(i);return}(this.config.enableBaseQInLocalStorage||this.config.enableBaseQLocStorageOnlyZI)&&t.query!==undefined&&t.query&&_w.localStorage!==null&&_w.localStorage.setItem("baseq",t.query);f=t.url+(t.addInst?this.autosuggest.getAllSuggestionInstUrl():"");f=this.addExtraQueryStrings(f);t.nav&&!n.Utils.GetQueryStringParam(f,"form")&&(f=this.addFormCode(f));this.shouldRedirectToSapphire()?(e=this.getRedirectionPositionId(),this.sapphireRedirectionLogger("navigateToUrl","RedirectToSapphire","PositionID",e),SAUpsellTrigger.searchNativelyByApp(f,e,u)):u?_w.open(f,u):typeof sj_lc!="undefined"?sj_lc(f):_w.location.href=f},a.prototype.firePartnerEvents=function(n){!n&&this.fireEvt&&this.fireEvt(this.searchForm,"ASSugClicked")},a.prototype.getCustomUrlParams=function(n){var r={},t;if(n)for(var i=void 0,f=/\+/g,e=/([^&=]+)=?([^&]*)/g,u=function(n){return decodeURIComponent(n.replace(f," "))},o=n.substring(n.indexOf("?")+1);i=e.exec(o);)t=u(i[1]).toLowerCase(),t!=="q"&&t!=="form"&&(r[t]=u(i[2]));return r},a.prototype.bindEvents=function(n,t){var i=this,r;n(sj_b,"click",this.hideDropDownOnFocusChange);n(sj_b,"touchend",this.hideDropDownOnFocusChange);n(this.searchForm,"submit",this.onSubmit);this.config.submitOnEnter&&sj_evt.fire("AS.BindKeyDown");n(this.searchBox,"keydown",this.onSearchBoxKeyDown);this.config.CommonFooter&&n(this._asContainer,"keydown",this.onASKeyDown);this.config.enableSbLeftSpyglass&&this.addSearchBoxLeftSpyglass();"ontouchend"in _w&&n(this.searchBox,"touchend",this.searchBoxTouchAction);n(this.searchBox,"click",this.searchBoxClickAction);this.config.popUpASFromUA&&(this.config.clickUAClearSB?sj_evt.bind(f,this.clearSearchBox,!1):sj_evt.bind(f,this.searchBoxClickAction,!1));this.config.expandOnFocus&&n(this.searchBox,"focus",this.searchBoxClickAction);this.fireEvt&&n(_w,"blur",this.hideDropDownOnFocusChange);r=function(){t("focusChange",function(n){return i.focusChange(n)});t("hideDrawer",function(){return i.hideDropDown(3)});t("SB.LineChange",function(n){return i.handleAsDropDown(n)})};r();this.config.bi&&t("ajax.load",function(n){var t=n&&n[1];t&&t.isInstantRequest&&(i._currentImpressionQuery=t.query||i.searchBox.value,i.config.asdbc?i.debouncingAutosuggest():i.pollForQueryChange(),r())});"oninput"in this.searchBox&&n(this.searchBox,"input",this.onTextInput)},a.prototype.minEditDistance=function(n,t){for(var r,f=n.length,e=t.length,u=[],i=0;i<=f;i++)for(u[i]=[],r=0;r<=e;r++)u[i][r]=0;for(i=0;i<=f;i++)u[i][0]=i;for(r=0;r<=e;r++)u[0][r]=r;for(i=1;i<=f;i++)for(r=1;r<=e;r++)u[i][r]=n[i-1]===t[r-1]?u[i-1][r-1]:1+Math.min(u[i][r-1],u[i-1][r],u[i-1][r-1]);return u[f][e]},a.prototype.isJSONSuggestion=function(n){return n&&typeof n.q=="string"&&typeof n.t=="string"},a.prototype.fetchForCurrentQuery=function(){if(this._noResultsTimeout&&sb_ct(this._noResultsTimeout),!this._bDisabled){this._lastQuery=null;var n=this.config.asevtdrv;n||this.config.disasdbcsbclick?this.fetchSuggestions(this.getQueryToFetch(),this.getCurrentQuery(!0)):this.fetchSuggestionsDebounced(this.getQueryToFetch(),this.getCurrentQuery(!0))}},a.prototype.showDropDown=function(){if(!this._showAsdropdown||typeof SearchBoxAttachmentManager!="undefined"&&SearchBoxAttachmentManager.getSearchBoxAttachmentManager().hasAttachments())this._isLayoutVisible=!0,this.hideDropDown(5);else{if(this._layout.update(),this.config.enableFullPageAs&&(_w.location.hash="asqf"),this.fireEvt){var n=this.autosuggest.canvas.containsNextWord?"1":"0";this.searchForm.setAttribute("SuggMode",n);this.fireEvt(this.searchForm,"autosuggestRendered")}this._isLayoutVisible||(sj_evt.fire("focusChange",this.searchBox),this._layout.show(),this._isLayoutVisible=!0,sb_i6&&sj_evt.fire("autosuggestShown",this.searchBox),sj_evt.fire("onPopTR"),this.fireEvt&&this.fireEvt(this.searchForm,"autosuggestShown"),this.searchForm.setAttribute("aria-owns","sw_as"))}},a.prototype.handleAsDropDown=function(n){if(this.config.ascontainer){var t=n&&n[1]?n[1].total_line:1;this.setshowAsDropDownValue(t<=1)}},a.prototype.hideDropDown=function(t,i){var r,u,o,s;if(t!=0&&(this._lastClickQuery=null),this._isLayoutVisible){if(this._layout.hide(),this._isLayoutVisible=!1,this.searchForm.removeAttribute("aria-owns"),r=n.Utils,u=document.getElementsByClassName("b_searchboxForm")[0],this.config.enableAsPanelExpansion){var f=/(\s|^)as_rsform/g,e=_ge("b_header");e&&r.RemoveClassName(e,f);r.RemoveClassName(u,f);this.autosuggest.canvas.isBNorrClassPresent&&r.AddClassName(document.body,"b_norr")}this.config.asshdw&&(o=/(\s|^)as_shadow/g,r.RemoveClassName(u,o));this.config.asOnSBRound&&(s=/(\s|^)as_show/g,r.RemoveClassName(u,s));t!=0&&(this._lastQuery=this.getQueryToFetch());t!=5&&this.raiseEvent(30);this.raiseEvent(16);this.autosuggest.finalizeKeystroke();i&&this.config.hdm&&sj_pd(i);_w._H&&sj_evt.fire("ASHide");this.autosuggest.setQuery(undefined)}sj_evt.fire("autosuggestHide",this.searchBox,t);this.fireEvt&&(this.searchForm.removeAttribute("SuggMode"),this.fireEvt(this.searchForm,"autosuggestHide"))},a.prototype.focusChange=function(n){n[1]!==this.searchBox&&this.hideDropDown(1)},a.prototype.startNoMatchTimeout=function(){var n=this;this._noResultsTimeout=sb_st(function(){return n.hideDropDown(0)},50)},a.prototype.onUpdateText=function(n,t){t===void 0&&(t=!0);this.getCurrentQuery()!=n&&t&&(this._bRequeryOnTextChange=!1);t?this.updateSearchBoxValue(n):this.sendQfcEvent()},a.prototype.sendQfcEvent=function(n,t){this.config.ascontainer?(sj_evt.fire("AS.Input.Update",{suggestion:n,nudge:!0,type:"AS"}),this.config.easpm&&n!=null&&t!=null&&this.autosuggest.raiseGhostingEventFired(this.searchBox.value,t)):n&&sj_evt.fire("AS.Input.Update",{target:this.searchBox})},a.prototype.updateSearchBoxValue=function(i,r,u){var f=r&&!this.config.ascontainer?i+r:i,e;this._autoCompletedPrefixLength=r&&!this.config.ascontainer?i.length:null;this.config.ghostingWithGreyText&&r&&(this._ghostingText=r,this._prefixText=this.config.ascontainer?i:i+r);f!==null&&(this.searchBox.value=f,this.config.asevtdrv&&this.searchBox.setAttribute("value",f),t||(this.searchBox.setAttribute("value",f),this.sendQfcEvent(r,u)),e=f===null||f===void 0?void 0:f.length,e&&this.getCurrentQuery(!0)!=i&&n.Utils.SetSelectionRange(this.searchBox,e,e),this.config.asperfv2?i&&i!=this._lastTextChanged&&u===undefined&&this.triggerTextChangedEvent(i):i&&i!=this._lastTextChanged&&this.triggerTextChangedEvent(i))},a.prototype.onUpdateTextAndRequery=function(t,i){if(this._bRequeryOnTextChange=!0,this.updateSearchBoxValue(t),!i){var r=t.length;this.searchBox.focus();n.Utils.SetSelectionRange(this.searchBox,r,r)}},a.prototype.onUpdateGhostedText=function(n,t,i,r){this._bRequeryOnTextChange=i===undefined?!0:i;this.updateSearchBoxValue(n,t,r)},a.prototype.triggerTextChangedEvent=function(n){this._lastTextChanged=n;this.autosuggest.raiseTextChanged(n,++this._textChangeSequence)},a.prototype.getGhostingInformation=function(n){return n+this._ghostingText==this._prefixText?!0:!1},a.prototype.fetchPSCSuggestions=function(n){var t=n.trim().split(/\s+/).length>3||n.trim().split(/\s+/).length===3&&n.substr(-1)===" ",i,r;t||(this._lastPSCQueryLength=0);i=n.length>=this._lastPSCQueryLength+2||n.length<=this._lastPSCQueryLength-2;r=t&&(this.config.aspscec||i);r&&(this._lastPSCQueryLength=n.length,this.autosuggest.setPSCQuery(n))},a.prototype.isQuerySubstringOfGhostedQuery=function(n){return this.config.ghostingWithGreyText&&(this.getGhostingInformation(n)||this._prefixText&&this._ghostingText&&this._lastQuery&&n.length>this._lastQuery.length&&this._prefixText.length>=n.length&&this._prefixText.indexOf(n)==0&&this._ghostingText.indexOf(this._prefixText.substring(n.length-1,this._prefixText.length-1))==0)?!0:!1},a.prototype.handleEventDrivenQueryChange=function(){var i,n,r;this._bDisabled||(i=this.getCurrentQuery(!0),this._lastRawQuery!==i&&(this.autosuggest.setRawQuery(i),this._lastRawQuery=i,this.config.bi&&sj_evt.fire("AS.RawQueryChanged"),n=this.getQueryToFetch(),r=(this._lastQuery!==n||!this._bRequeryOnTextChange)&&!t,r=this.config.ascontainer?r:r&&!this.isQuerySubstringOfGhostedQuery(n),r&&this.config.enableSbUpdate&&(this.searchBox.setAttribute("value",n),this._isSearchBoxWebComponent&&(this.searchBox.value=i)),this.config.aspsc&&this.fetchPSCSuggestions(n),n!==this._lastQuery&&(this._bRequeryOnTextChange&&!this.suppressRequestForQuery?this.fetchSuggestions(n,i):this.suppressRequestForQuery&&this.config.eNw&&this.autosuggest.canvas.resizeNextWord&&this._bRequeryOnTextChange?this.hideDropDown(4):this._bRequeryOnTextChange||(this._bRequeryOnTextChange=!0),this._lastQuery=n)))},a.prototype.debouncingAutosuggest=function(){var e=this,i,n,r,f;this._bDisabled||(i=this.getCurrentQuery(!0),this._lastRawQuery!=i&&(this.autosuggest.setRawQuery(i),this._lastRawQuery=i,this.config.bi&&sj_evt.fire("AS.RawQueryChanged"),n=this.getQueryToFetch(),r=(this._lastQuery!=n||!this._bRequeryOnTextChange)&&!t,r=this.config.ascontainer?r:r&&!this.isQuerySubstringOfGhostedQuery(n),r&&(this.config.enableSbUpdate&&this.searchBox.setAttribute("value",n),this._isSearchBoxWebComponent&&this.config.enableSbUpdate&&(this.searchBox.value=i)),this.config.aspsc&&this.fetchPSCSuggestions(n),n!=this._lastQuery&&(this._bRequeryOnTextChange&&!this.suppressRequestForQuery?this.fetchSuggestionsDebounced(n,i):this.suppressRequestForQuery&&this.config.eNw&&this.autosuggest.canvas.resizeNextWord&&this._bRequeryOnTextChange?this.hideDropDown(4):this._bRequeryOnTextChange||(this._bRequeryOnTextChange=!0),this._lastQuery=n)),f=this._pollInterval,this._pollThrottlingEnabled&&(f*=1<<Math.max(0,this._pendingRequestCount-u+1)/2),(_G===null||_G===void 0?void 0:_G.InpOpt)===!0?setTimeout(function(){return e.debouncingAutosuggest()},f,"ASInternal"):sb_st(function(){return e.debouncingAutosuggest()},f))},a.prototype.pollForQueryChange=function(){var e=this,i,n,r,f;this._bDisabled||(i=this.getCurrentQuery(!0),this._lastRawQuery!=i&&(this.autosuggest.setRawQuery(i),this._lastRawQuery=i,this.config.bi&&sj_evt.fire("AS.RawQueryChanged"),n=this.getQueryToFetch(),r=(this._lastQuery!=n||!this._bRequeryOnTextChange)&&!t,r=this.config.ascontainer?r:r&&!this.isQuerySubstringOfGhostedQuery(n),r&&(this.config.enableSbUpdate&&this.searchBox.setAttribute("value",n),this._isSearchBoxWebComponent&&this.config.enableSbUpdate&&(this.searchBox.value=i)),this.config.aspsc&&this.fetchPSCSuggestions(n),n!=this._lastQuery&&(this._bRequeryOnTextChange&&!this.suppressRequestForQuery?this.fetchSuggestions(n,i):this.suppressRequestForQuery&&this.config.eNw&&this.autosuggest.canvas.resizeNextWord&&this._bRequeryOnTextChange?this.hideDropDown(4):this._bRequeryOnTextChange||(this._bRequeryOnTextChange=!0),this._lastQuery=n)),f=this._pollInterval,this._pollThrottlingEnabled&&(f*=1<<Math.max(0,this._pendingRequestCount-u+1)/2),sb_st(function(){return e.pollForQueryChange()},f))},a.prototype.fetchSuggestionsDebounced=function(n,t){var i=this;this.config.asdbcdly&&(this.debounceDelay=this.config.asdbcdly);this.debounceTimeout&&clearTimeout(this.debounceTimeout);this.debounceTimeout=setTimeout(function(){i.fetchSuggestions(n,t)},this.debounceDelay)},a.prototype.fetchSuggestions=function(n,t){this._noResultsTimeout&&sb_ct(this._noResultsTimeout);this.autosuggest.setCursorPosition(this.adjustCursorPositionForModifiedQuery(t,n));this.autosuggest.setQuery(n);n.length!=0||this.config.fetchOnEmpty||this.config.enableZeroQfWork||this.hideDropDown(0);this._pendingRequestCount++},a.prototype.adjustCursorPositionForModifiedQuery=function(n,t){var r=this.getCursorPosition(),i;if(t!==n&&t!="")for(i=0;i<n.length&&n[i]!=t[0];i++)r--;return r},a.prototype.handleResponseReceived=function(){this._pendingRequestCount--},a.prototype.getQueryToFetch=function(){var t=this.getCurrentQuery(!0).toLowerCase();return this.config.trimwsnr&&(t=n.Utils.TrimmedQueryFromSuggestions(this.autosuggest.canvas.currentSuggestionList,t)),t},a.prototype.isQueryGhosted=function(){var n;return this.config.ascontainer?!!((n=_qs(".ghost"))===null||n===void 0?void 0:n.innerText):!!this._autoCompletedPrefixLength},a.prototype.getCurrentQuery=function(n){var t,i,r="";return r=this._autoCompletedPrefixLength?(t=this.searchBox)===null||t===void 0?void 0:t.value.substr(0,this._autoCompletedPrefixLength):(i=this.searchBox)===null||i===void 0?void 0:i.value,n?r:r.replace(this._trimRegex,"").replace(this._removeSpacesRegex," ").toLowerCase()},a.prototype.getPartnerCode=function(n){var u="",i=n.indexOf("pc"),f,t,e,r;return i>=0&&(f=n.indexOf("&",i),r=f>=0?n.substr(i,f-i):n.substr(i),u+="&"+r),t=n.indexOf("pt"),t>=0&&(e=n.indexOf("&",t),r=e>=0?n.substr(t,e-t):n.substr(t),u+="&"+r),u},a.prototype.checkMonitr=function(n){var t=n.indexOf("form=monitr");return t>=0?"&"+n.substr(t,11):""},a.prototype.getPubcode=function(n){if(n.indexOf("pubcode=null")!==-1&&n.indexOf("pt=opentetris")!==-1)return"&pubcode=null";var t=n.indexOf("pubcode");return"&pubcode="+n.substr(t+8,32)},a.prototype.addExtraQueryStrings=function(n){return this.config.pv?n+this.getPubcode(document.URL)+"&pubexp=1"+this.getPartnerCode(document.URL)+this.checkMonitr(document.URL):n},a.prototype.addFormCode=function(n){return n+"&form="+this.searchForm.form.defaultValue},a.prototype.getLastRequestedQuery=function(){return this._lastQuery},a.prototype.notifyDeleteHistory=function(n){this.raiseEvent(22,n)},a.prototype.dispose=function(){this.clearEvents();this.bindEvents(sj_ue,sj_evt.unbind);sb_ct(this._noResultsTimeout);this.internalEventTrigger&&this.internalEventTrigger.dispose()},a.prototype.isEmptyQuery=function(){var n=_ge("sb_form_q");return n&&!n.value},a.prototype.getContainer=function(){return _ge(this.config.c||"sw_as")},a.prototype.imeCheckForJapanese=function(){if(this.searchBox.blur(),this.searchBox.focus(),document.createEvent){var n=new Event("blurfocusIme");this.searchBox.dispatchEvent(n)}o=this.searchBox.value;setTimeout(function(){document.querySelector("#sb_form_q").value=o},50)},a.prototype.logAutoSuggestNetworkLatency=function(){_w.Log&&Log.Log&&Log.Log("Autosuggest","NetworkLatency","PerfInst",!1,"Meta",this.autosuggest.networkLatencyInfo)},a.prototype.gaNtp=function(n){return n!==null&&n.shadowRoot!==null?this.gaNtp(n.shadowRoot.activeElement):n},a.prototype.navigateJSON=function(n,t,i,r,u){var h=this,s,e,o,f;if(sb_st(function(){return h.hideDropDown(2)},5),this.config.isCS&&(s=n.split("_")[1],Log.Log("CI.Click","CSearchASBaseRegion","Click",!1,"AppNS",u,"K",s+".1","IG",_G.IG)),this.makeAutoSuggestGPingCall(n),e=t,e!=undefined&&this.updateSearchBoxValue(e),this.config.logClickOnSuggestion&&(r?typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("Autosuggest","Suggestion","EnterClick",!1):typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("Autosuggest","Suggestion","MouseClick",!1)),this.config.enbleClientPerfTelemetry&&typeof this.autosuggest.networkLatencyInfo!=undefined&&this.autosuggest.networkLatencyInfo&&this.logAutoSuggestNetworkLatency(),this.config.isCS){CopilotSearch.AutoSuggest.handleAutoSuggestClick(t,null,t,"");return}if(this.shouldRedirectToSapphire()){o=this.getRedirectionPositionId();f=i+this.autosuggest.getAllSuggestionInstUrl();f=this.addExtraQueryStrings(f);this.sapphireRedirectionLogger("navigateToUrl","RedirectToSapphire","PositionID",o);SAUpsellTrigger.searchNativelyByApp(f,o);return}this.navigateToUrlJSON(t,i)},a.prototype.navigateToUrlJSON=function(n,t){if(this.searchForm.onsubmit)this.searchForm.onsubmit(null);if(this.config.bi&&this._currentImpressionQuery===n){sj_evt.fire(i);return}if(t){var r=t+this.autosuggest.getAllSuggestionInstUrl();this.config.enableBaseQInLocalStorage&&n!==undefined&&n&&_w.localStorage!==null&&_w.localStorage.setItem("baseq",n);r=this.addExtraQueryStrings(r);typeof sj_lc!="undefined"?sj_lc(r):_w.location.href=r}},a.prototype.updateLSOnClick=function(t){n.Utils.setItem(t,0)},a.prototype.clearQuery=function(){var n=_ge("sb_form_q");n&&(n.value="")},a.prototype.sapphireRedirectionLogger=function(n,t,i,r){i&&r?typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("Autosuggest",n,t,!1,i,r):typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("Autosuggest",n,t,!1)},a.prototype.getRedirectionPositionId=function(){return _w.location.pathname.indexOf("search")>0?"Bing_DirectOpen_SERP_AS":_w.location.pathname==="/"?"Bing_DirectOpen_HP_AS":"Bing_DirectOpen_OTHER_AS"},a.prototype.shouldRedirectToSapphire=function(){if(this.config.blockIncognitoSapphireSearch&&this.config.isFirstSession)return this.sapphireRedirectionLogger("shouldRedirectToSapphire","Incognito mode blocked"),!1;if(this.config.enableSapphireSearchTrigger&&typeof SAUpsellTrigger!="undefined"){if(SAUpsellTrigger.setConfigs(this.config.sapphireSearchRedirectTimeout,this.config.maxSapphireSearchRedirect),SAUpsellTrigger.shouldRedirectToSapphire())return!0;this.sapphireRedirectionLogger("SubmitFormHandler","RedirectionBlocked")}return!1},a.ScopeExtensions=[],a}(n.EventRegisterer);n.SearchForm=l})(t=n.AS||(n.AS={}))}(Bing||(Bing={}));var GhostingType={GhostFirstSuggNW:"GhostFirstSuggNW",GhostFirstFSugg:"GhostFirstFSugg",NwBasedGhosting:"NwBasedGhosting",GhostHistory:"GhostHistory"},TabPromptType={TabInline:"TabInline",TabSuperScript:"TabSuperScript"},STypes={Entity:"MB",ASHistory:"HS"},Bing;(function(n){var t;(function(n){var t=navigator.userAgent.toLowerCase(),i=t.indexOf("msie ")===-1||t.indexOf("rv:11.0")>-1,r=function(){function t(){this._imeInProgress=!1;this.boldGhosting=!1}return t.prototype.init=function(t){if(t.config.eHC){var i=new n.EventRegistration(this);i.add(6,this.onSearchFormInitialized);t.registerEvents(i)}this._instantEnabled=!!t.config.bi},t.prototype.onSearchFormInitialized=function(t){var r=this,o,u,e,h;this.searchFormInstance=t;u=t.autosuggest;u.ghostInstValue=0;this.ghostingType=t.config.ghostingWithGreyText;this.boldGhosting=t.config.ghostWithBoldText;var a=function(){return u.ghostInstValue=2},v=function(){u.ghostInstValue==0&&(u.ghostInstValue=1)},f=t.searchBox,c=function(t,i){n.Utils.SetSelectionRange(f,t,i);r.ghostingType&&!r.boldGhosting&&t!==i&&(n.Utils.AddClassName(f,"sb_form_ghosting"),r.previousQuery!=u.currentQuery&&(u.ghostingShown=u.ghostingShown?u.ghostingShown+1:1),r.previousQuery=u.currentQuery,f.spellcheck=!1)};this.isCursorPositionAtTheEnd=function(){return t.getCursorPosition()==r.getPartialQuery().length};this.getSearchBoxValue=function(){return f.value};this.getPartialQuery=function(){return t.getCurrentQuery(!0)};this.getGhostedQuery=function(){return t.isQueryGhosted()?r.getSearchBoxValue():null};this.getCurrentImpressionQuery=t.getCurrentImpressionQuery;this.resetGhosting=function(t,i,e,o){var s,h,l,v,y,p;u.raiseUpdateGhostedText(null,null,t);r.ghostingType&&!r.boldGhosting&&(n.Utils.RemoveClassName(f,/(\s|^)sb_form_ghosting/g),r.setTabPosition(!1),f.spellcheck=!0);i&&(p=r.getSearchBoxValue().length,c(p,p));e&&(u.ghostingAccepted=u.ghostingAccepted?u.ghostingAccepted+1:1,u.ghostingPrefixLength=r.previousQuery?u.ghostingPrefixLength==""?"".concat((s=r.previousQuery)===null||s===void 0?void 0:s.length):"".concat(u.ghostingPrefixLength,"-").concat((h=r.previousQuery)===null||h===void 0?void 0:h.length):"",a(),r.searchFormInstance.config.asGhostingInstrumentation&&u.ghostInstValue==2&&o&&u.raiseGhostingAccepted((l=r.previousQuery)===null||l===void 0?void 0:l.length,((v=f===null||f===void 0?void 0:f.value)===null||v===void 0?void 0:v.length)-((y=r.previousQuery)===null||y===void 0?void 0:y.length),o))};this.removeGhosting=function(t){r.ghostingType&&!r.boldGhosting&&(n.Utils.RemoveClassName(f,/(\s|^)sb_form_ghosting/g),f.spellcheck=!0,r.setTabPosition(!1));t?u.raiseUpdateTextAndRequery(r.getPartialQuery()):u.raiseUpdateText(r.getPartialQuery())};this.setGhostValue=function(n,t){t?(u.raiseUpdateGhostedText(n,t),c(n.length,(n+t).length),v(),r.searchFormInstance.config.asGhostingInstrumentation&&u.ghostInstValue==1&&u.raiseGhostedTextLength(n.length,t.length),r.ghostingType&&n!==t&&r.setTabPosition(!0)):(u.raiseUpdateTextAndRequery(n),r.ghostingType&&r.setTabPosition(!1))};var y=function(n){return r.handleSearchBoxKeyPress(n)},p=function(n){return r.handleSearchBoxKeyDown(n)},w=function(){return r.handleSearchBoxMouseDown()},b=function(){return r.removeGhosting(!1)},k=function(){return r.handleCompositionStart()},d=function(){return r.handleCompositionEnd()},g=function(n){return r.handleSearchBoxKeyUp(n)},l=function(n,t){n(f,"keypress",y);n(f,"keydown",p);n(f,"mousedown",w);t("onFeedbackStarting",b);i?(n(f,"compositionstart",k),n(f,"compositionend",d)):n(f,"keyup",g)},s=new n.EventRegistration(this);s.add(10,this.handleSuggestionsRendered);s.add(17,function(){return l(sj_ue,sj_evt.unbind)});u.registerEvents(s);e=new n.EventRegistration(this);e.add(15,function(){r.getGhostedQuery()&&r.resetGhosting(!1,!0,!0)});e.add(16,this.onDropDownHidden);t.registerEvents(e);t.config.ascsr&&(h=new n.EventRegistration(this),h.add(10,this.handleSuggestionsRendered),(o=t.internalEventTrigger)===null||o===void 0?void 0:o.registerEvents(h));l(sj_be,sj_evt.bind)},t.prototype.onDropDownHidden=function(){var n=this.getGhostedQuery();n&&(this._instantEnabled?this.getCurrentImpressionQuery()===n&&this.resetGhosting(!1,!0,!0):this.removeGhosting(!1))},t.prototype.handleCompositionStart=function(){this._imeInProgress=!0},t.prototype.handleCompositionEnd=function(){this._imeInProgress&&(this._imeInProgress=!1,this.resetGhosting(!0,!1,!1),this._pendingGhostFirstSuggestion&&sb_st(this._pendingGhostFirstSuggestion,0))},t.prototype.ghostFirstSuggestion=function(n,t,i){var c,l,a,v,f,u,e,o,y,r,h;if((this._pendingGhostFirstSuggestion=null,f=this.searchFormInstance.config.ascsr,n&&t==n.toLowerCase())&&this._lastKeyDown!=46&&this._lastKeyDown!=8&&this.isCursorPositionAtTheEnd()){if(this.ghostingType==GhostingType.GhostFirstFSugg)u=f?(c=i[0])===null||c===void 0?void 0:c.q:(l=i[0])===null||l===void 0?void 0:l.query;else if(this.ghostingType==GhostingType.GhostHistory&&this.suggestionIsHistory(i[0]))u=f?(a=i[0])===null||a===void 0?void 0:a.q:(v=i[0])===null||v===void 0?void 0:v.query;else if(i)for(o=0,y=i;o<y.length;o++)if(r=y[o],r){var p=f?r===null||r===void 0?void 0:r.q:r===null||r===void 0?void 0:r.query,s=void 0,w=f?r.t:r.type;if(e===undefined&&(e=p),f?(r=r,r&&r.g&&(s=r.g)):s=r.ghtxt,this.ghostingType==GhostingType.NwBasedGhosting&&s){u=s;break}else if(r.hc&&w!=="ADS"){u=p;break}}u&&u.indexOf(t)==0&&u.length>n.length?(h=u.slice(n.length),this.setGhostValue(n,h)):this.ghostingType==GhostingType.GhostFirstSuggNW&&e!==undefined&&e.indexOf(t)==0&&e.length>n.length&&(h=e.slice(n.length).split(" ")[0],this.setGhostValue(n,h))}},t.prototype.handleSuggestionsRendered=function(t,i,r,u,f){var o=this,e;this.searchFormInstance.config.ghostingWithGreyText&&this.searchFormInstance.getGhostingInformation(t)||f==n.DataSources.Web&&(e=this.getPartialQuery(),this._imeInProgress?this._pendingGhostFirstSuggestion=function(){return o.ghostFirstSuggestion(e,t,i)}:this.ghostFirstSuggestion(e,t,i))},t.prototype.handleSearchBoxKeyDown=function(t){var f=this,r=this._lastKeyDown=t.keyCode,u,e;if(t.ctrlKey&&r==90){sj_pd(t);return}if(i||this._imeInProgress||r!=229||this.handleCompositionStart(),this._imeInProgress||!this.getGhostedQuery()||r==38||r==40){this.ghostingType&&!this.boldGhosting&&(u=document.querySelector("#sb_form_q"),n.Utils.RemoveClassName(u,/(\s|^)sb_form_ghosting/g));return}switch(r){case 13:r==13&&(this.ghostingType&&!this.boldGhosting?this.resetGhosting(!1,!1,!1):this.resetGhosting(!1,!0,!0));break;case 37:this.resetGhosting(!1,!1,!0,"arrowLeft");break;case 33:this.resetGhosting(!1,!1,!0,"pageUp");break;case t.shiftKey&&39:this.resetGhosting(!1,!1,!0,"shiftArrowRight");break;case 35:this.resetGhosting(!0,!1,!0,"pressEnd");break;case 34:this.resetGhosting(!0,!1,!0,"pageDown");break;case 39:this.resetGhosting(!0,!1,!0,"arrowRight");break;case t.ctrlKey&&65:this.ghostingType&&!this.boldGhosting&&(u=document.querySelector("#sb_form_q"),n.Utils.RemoveClassName(u,/(\s|^)sb_form_ghosting/g));this.resetGhosting(!0,!1,!0,"selectAll");break;case 9:this.resetGhosting(!0,!0,!0,"pressTab");sj_pd(t);break;case 27:case t.ctrlKey&&8:this.removeGhosting(!0);sj_pd(t);break;case 46:case 8:case t.ctrlKey&&88:this.resetGhosting(!0,!1,!1);break;case t.ctrlKey&&86:case t.shiftKey&&45:this.removeGhosting(!0);break;default:e=this.getSearchBoxValue().toLowerCase();sb_st(function(){e!=f.getSearchBoxValue().toLowerCase()&&f.resetGhosting(!0,!1,!1)},0)}},t.prototype.handleSearchBoxKeyUp=function(n){this.setTabPosition(!1);var t=n.keyCode;this._imeInProgress&&(t==13||t==27||t==8||t==37||t==39)&&this.handleCompositionEnd()},t.prototype.handleSearchBoxKeyPress=function(n){var t;if(this.setTabPosition(!1),t=this.getGhostedQuery(),t){var i=n.char?n.char:String.fromCharCode(n.charCode?n.charCode:n.keyCode),r=this.getPartialQuery(),u=t.slice(r.length);u.charAt(0)==i.toLowerCase()?(this.setGhostValue(r+i,u.slice(1)),sj_pd(n)):this.resetGhosting(!0,!1,!1)}},t.prototype.handleSearchBoxMouseDown=function(){this.getGhostedQuery()&&(this.searchFormInstance.config.isMobile&&this.searchFormInstance.config.ghostingWithGreyText?this.resetGhosting(!1,!0,!0):this.resetGhosting(!1,!1,!0))},t.prototype.setTabPosition=function(n){var t,r,i,u;this.searchFormInstance.config.enableTabPrompt&&(t=this.searchFormInstance.searchBox,r=document.querySelector(".b_searchboxForm .sb_ghostingTab"),r&&(i=r,n&&t?(i.classList.add("sb_ghostingTab_visible"),u=this.getLeftMargin(t),u+32<this.searchFormInstance.searchBox.offsetWidth&&(i.style.marginLeft="".concat(u,"px")),i.style.marginTop=this.searchFormInstance.config.enableTabPrompt==TabPromptType.TabInline?"".concat(~~((t.parentElement.offsetHeight-24)/2),"px"):"".concat(~~((t.parentElement.offsetHeight-24)/4),"px")):i.classList.remove("sb_ghostingTab_visible")))},t.prototype.getLeftMargin=function(n){var i=window.getComputedStyle(n,null),u="".concat(i.getPropertyValue("font-weight")," ").concat(i.getPropertyValue("font-size")," ").concat(i.getPropertyValue("font-family")," "),f=document.createElement("canvas"),r=f.getContext("2d"),t;return r.font=u,t=r.measureText(this.getSearchBoxValue()),this.searchFormInstance.config.searchBoxSpyglass?t.width+66:this.searchFormInstance.config.isMobile?t.width+16:t.width+30},t.prototype.suggestionIsHistory=function(n){return this.searchFormInstance.config.ascsr?(n=n,n.t==STypes.ASHistory||n.bt==STypes.ASHistory):(n=n,n.stype==STypes.ASHistory||n.className.indexOf("pp_sTileHS")!=-1)},t}();n.SearchForm.ScopeExtensions.push(new r)})(t=n.AS||(n.AS={}))})(Bing||(Bing={})),function(n){var t;(function(n){var i=function(){function t(){}return t.prototype.getCallbacks=function(){var t=new n.EventRegistration(this);return t.add(11,this.onNoResults),t.add(10,this.onSuggestionsRendered),t},t.prototype.set=function(n){this._data=n;this._data.currentQuery.length<=1&&(this._lastQueryWithNoResults=null)},t.prototype.match=function(){return this._lastQueryWithNoResults&&this._data.currentQuery.substr(0,this._lastQueryWithNoResults.length)==this._lastQueryWithNoResults},t.prototype.onNoResults=function(n){this._lastQueryWithNoResults=n},t.prototype.onSuggestionsRendered=function(t,i,r,u,f){f==n.DataSources.Web&&(this._lastQueryWithNoResults=null)},t}(),r=function(){function t(n){this._searchFormInstance=n;this._exceededNextWordLimit=!1}return t.prototype.getCallbacks=function(){return new n.EventRegistration(this)},t.prototype.set=function(){if(this._searchFormInstance.config.ascqsl!=2e3){var t=this._searchFormInstance.getCurrentQuery(),i=this._searchFormInstance.searchBox.offsetWidth,r=this._searchFormInstance.searchForm?n.Utils.CalcWidth(this._searchFormInstance.searchForm,t):0,u=r/i;this._exceededNextWordLimit=u>.7}},t.prototype.match=function(){return this._exceededNextWordLimit},t}(),u=function(){function t(n){this._searchFormInstance=n;this._supressQueryCall=!1}return t.prototype.getCallbacks=function(){return new n.EventRegistration(this)},t.prototype.set=function(){this._supressQueryCall=this._searchFormInstance.getCurrentQuery().length>this._searchFormInstance.getCursorPosition()?!1:!0},t.prototype.match=function(){return this._supressQueryCall},t}(),t=function(){function t(){this._rules=[]}return t.prototype.init=function(t){var i=new n.EventRegistration(this);i.add(6,this.onSearchFormInitialized);t.registerEvents(i)},t.prototype.onSearchFormInitialized=function(n){this._searchFormInstance=n;this.addRules();this.addCallbacks()},t.prototype.addRules=function(){var n=this._searchFormInstance.config;n.eNw&&n.nwLim&&this._rules.push(new r(this._searchFormInstance));n.suppnores&&this._rules.push(new i(n));!n.ascontainer||n.isMobile||n.iscxtab||this._rules.push(new u(this._searchFormInstance))},t.prototype.addCallbacks=function(){var o=this._rules.length,r,u,t,f,e,i;if(o)for(r=this._searchFormInstance.autosuggest,u=new n.EventRegistration(this),u.add(18,this.onTextChanged),r.registerEvents(u),t=0,f=this._rules;t<f.length;t++)e=f[t],i=e.getCallbacks(),i&&(r.registerEvents(i),this._searchFormInstance.internalEventTrigger&&this._searchFormInstance.internalEventTrigger.registerEvents(i))},t.prototype.updateDataForRules=function(){var n,t,i;for(this._data={currentQuery:this._searchFormInstance.getCurrentQuery()},n=0,t=this._rules;n<t.length;n++)i=t[n],i.set(this._data)},t.prototype.getSuppressRequestForQuery=function(){var n,t,i;if(this._data.currentQuery.length>this._searchFormInstance.config.ascqsl)return 1;if(!this._searchFormInstance.config.noNextWordTermination&&this._data.currentQuery.length>1)for(n=0,t=this._rules;n<t.length;n++)if(i=t[n],i.match())return 1;return 0},t.prototype.onTextChanged=function(){this.updateDataForRules();this._searchFormInstance.suppressRequestForQuery=this.getSuppressRequestForQuery()},t}();n.PrefixThrottling=t;n.SearchForm.ScopeExtensions.push(new t)})(t=n.AS||(n.AS={}))}(Bing||(Bing={})),function(){var n=sa_config,t,f,r,u;if(!n.asBundleLoaded){if(n.asBundleLoaded=!0,n.aslogtel&&n.asBundleLoaded&&Log.Log("ASBundleLoad","AS","AutoSuggestBootstrap",!1),performance.mark("AutosuggestJSBundleLoaded"),t=Bing.AS.CommonPrefixDataProvider?new Bing.AS.CommonPrefixDataProvider:new Bing.AS.DataProvider,n.ascsr){var i=new Bing.AS.InternalEventTrigger,r=new Bing.AS.CsrClientState(i),u=new Bing.AS.WebCore(r,t,f,i);sa_inst=new Bing.AS.SearchForm(n,u,i)}else Bing.AS.Canvas!==null&&typeof Bing.AS.Canvas!="undefined"&&(r=new Bing.AS.Canvas,u=new Bing.AS.WebCore(r,t,f),sa_inst=new Bing.AS.SearchForm(n,u));sa_inst!==null&&sa_inst!==undefined&&(sa_inst.init("sa_inst"),sa_eL&&sa_inst.show());_w.sj_evt&&sj_evt.fire("autoSugLoaded");sj_evt.bind("ajax.load",function(n){var t=n&&n[1];t&&t.isInstantRequest&&_w.sj_evt&&sj_evt.fire("autoSugLoaded")})}}()